import{c as me,o as i,b as d,M as b,a9 as R,u as pe,v as G,N as _e,n as fe,O as W,a7 as ye,r as n,K as f,w as t,L as w,l as o,V as h,a,q as y,t as _,F as be,e as T,I as xe,j as V,ab as ge,ac as ve,k as he,ae as U,af as X,a8 as O}from"./main-CAtQQnL-.js";import{u as q}from"./expense-Tu5tO543.js";import{u as Ce}from"./category-DzRv02wO.js";const Ee={width:"110",height:"110",viewBox:"0 0 110 110",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Be={__name:"UFOIcon",props:{primaryFillColor:{type:String,default:"fill-primary-500"},secondaryFillColor:{type:String,default:"fill-gray-600"}},setup(m){return(u,S)=>(i(),me("svg",Ee,[d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M55 13.75C24.6245 13.75 0 22.9848 0 34.375C0 45.7652 24.6245 55 55 55C85.3755 55 110 45.7652 110 34.375C110 22.9848 85.3755 13.75 55 13.75ZM55 15.4688C86.8708 15.4688 108.281 25.245 108.281 34.375C108.281 43.505 86.8708 53.2812 55 53.2812C23.1292 53.2812 1.71875 43.505 1.71875 34.375C1.71875 25.245 23.1292 15.4688 55 15.4688Z",class:b(m.secondaryFillColor)},null,2),d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M54.9999 1.71875C66.0842 1.71875 75.7452 7.92172 80.697 17.038L82.732 17.2081C77.6737 7.01078 67.1549 0 54.9999 0C42.7985 0 32.2454 7.06406 27.2095 17.3267L29.2479 17.1411C34.1824 7.96812 43.8745 1.71875 54.9999 1.71875Z",class:b(m.primaryFillColor)},null,2),d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M55 96.25C40.7619 96.25 25.7812 99.3283 25.7812 103.125C25.7812 106.922 40.7619 110 55 110C69.2381 110 84.2188 106.922 84.2188 103.125C84.2188 99.3283 69.2381 96.25 55 96.25ZM55 97.9688C70.4602 97.9688 81.5959 101.317 82.4811 103.125C81.5959 104.933 70.4602 108.281 55 108.281C39.5398 108.281 28.4041 104.933 27.5189 103.125C28.4041 101.317 39.5398 97.9688 55 97.9688Z",class:b(m.primaryFillColor)},null,2),d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M27.4756 103.328L25.8049 102.922L41.2737 39.3286L42.9443 39.7342L27.4756 103.328Z",class:b(m.primaryFillColor)},null,2),d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M82.5247 103.328L67.0559 39.7342L68.7265 39.3286L84.1953 102.922L82.5247 103.328Z",class:b(m.primaryFillColor)},null,2),d("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M68.75 39.5312C68.75 42.3792 62.5934 44.6875 55 44.6875C47.4066 44.6875 41.25 42.3792 41.25 39.5312C41.25 36.6833 47.4066 34.375 55 34.375C62.5934 34.375 68.75 36.6833 68.75 39.5312Z",class:b(m.secondaryFillColor)},null,2)]))}},ke={__name:"ExpenseIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(m){const u=m,S=R();pe();const{t:C}=G.useI18n(),E=q(),B=_e();fe();const v=W();ye("utils");function c(r){S.openDialog({title:C("general.are_you_sure"),message:C("expenses.confirm_delete",1),yesLabel:C("general.ok"),noLabel:C("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(x=>{x&&E.deleteExpense({ids:[r]}).then(g=>{g&&u.loadData&&u.loadData()})})}return(r,x)=>{const g=n("BaseIcon"),D=n("BaseButton"),k=n("BaseDropdownItem"),P=n("router-link"),L=n("BaseDropdown");return i(),f(L,null,{activator:t(()=>[o(B).name==="expenses.view"?(i(),f(D,{key:0,variant:"primary"},{default:t(()=>[a(g,{name:"EllipsisHorizontalIcon",class:"h-5 text-white"})]),_:1})):(i(),f(g,{key:1,name:"EllipsisHorizontalIcon",class:"h-5 text-gray-500"}))]),default:t(()=>[o(v).hasAbilities(o(h).EDIT_EXPENSE)?(i(),f(P,{key:0,to:`/admin/expenses/${m.row.id}/edit`},{default:t(()=>[a(k,null,{default:t(()=>[a(g,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),y(" "+_(r.$t("general.edit")),1)]),_:1})]),_:1},8,["to"])):w("",!0),o(v).hasAbilities(o(h).DELETE_EXPENSE)?(i(),f(k,{key:1,onClick:x[0]||(x[0]=Z=>c(m.row.id))},{default:t(()=>[a(g,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),y(" "+_(r.$t("general.delete")),1)]),_:1})):w("",!0)]),_:1})}}},Ie={class:"relative table-container"},we={class:"relative flex items-center justify-end h-5"},Se={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},De={class:"absolute items-center left-6 top-2.5 select-none"},$e={class:"relative block"},Fe={class:"notes"},Ve={class:"truncate note w-60"},Ne={__name:"Index",setup(m){be();const u=q(),S=R(),C=Ce(),E=W();let B=T(!0),v=T(null);const c=xe({expense_category_id:"",from_date:"",to_date:"",customer_id:""}),{t:r}=G.useI18n();let x=T(null);const g=V(()=>!u.totalExpenses&&!B.value),D=V({get:()=>u.selectedExpenses,set:l=>u.selectExpense(l)}),k=V({get:()=>u.selectAllField,set:l=>u.setSelectAllState(l)}),P=V(()=>[{key:"status",thClass:"extra w-10",tdClass:"font-medium text-gray-900",placeholderClass:"w-10",sortable:!1},{key:"expense_date",label:r("expenses.date"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"name",label:r("expenses.category"),thClass:"extra",tdClass:"cursor-pointer font-medium text-primary-500"},{key:"user_name",label:r("expenses.customer")},{key:"notes",label:r("expenses.note")},{key:"amount",label:r("expenses.amount")},{key:"currency",label:r("expenses.currency")},{key:"base_amount",label:r("expenses.base_amount")},{key:"base_tax",label:r("expenses.base_tax")},{key:"base_total",label:r("expenses.base_total")},{key:"actions",sortable:!1,tdClass:"text-right text-sm font-medium"}]);ge(c,()=>{K()},{debounce:500}),ve(()=>{u.selectAllField&&u.selectAllExpenses()}),he(()=>{C.fetchCategories({limit:"all"})});async function L(l){return(await C.fetchCategories({search:l})).data.data}async function Z({page:l,filter:s,sort:I}){let N={...c,orderByField:I.fieldName||"created_at",orderBy:I.order||"desc",page:l};B.value=!0;let p=await u.fetchExpenses(N);return B.value=!1,{data:p.data.data,pagination:{data:p.data.data,totalPages:p.data.meta.last_page,currentPage:l,totalCount:p.data.meta.total,limit:10}}}function M(){x.value&&x.value.refresh()}function K(){M()}function j(){c.expense_category_id="",c.from_date="",c.to_date="",c.customer_id=""}function J(){v.value&&j(),v.value=!v.value}function Q(){return E.hasAbilities([h.DELETE_EXPENSE,h.EDIT_EXPENSE])}function Y(){S.openDialog({title:r("general.are_you_sure"),message:r("expenses.confirm_delete",2),yesLabel:r("general.ok"),noLabel:r("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(l=>{l&&u.deleteMultipleExpenses().then(s=>{s.data&&M()})})}return(l,s)=>{const I=n("BaseBreadcrumbItem"),N=n("BaseBreadcrumb"),p=n("BaseIcon"),A=n("BaseButton"),ee=n("BasePageHeader"),te=n("BaseCustomerSelectInput"),$=n("BaseInputGroup"),ae=n("BaseMultiselect"),z=n("BaseDatePicker"),le=n("BaseFilterWrapper"),ne=n("BaseEmptyPlaceholder"),se=n("BaseDropdownItem"),oe=n("BaseDropdown"),H=n("BaseCheckbox"),re=n("router-link"),F=n("BaseFormatMoney"),ue=n("BaseText"),ce=n("BaseTable"),de=n("BasePage");return i(),f(de,null,{default:t(()=>[a(ee,{title:l.$t("expenses.title")},{actions:t(()=>[U(a(A,{variant:"primary-outline",onClick:J},{right:t(e=>[o(v)?(i(),f(p,{key:1,name:"XMarkIcon",class:b(e.class)},null,8,["class"])):(i(),f(p,{key:0,name:"FunnelIcon",class:b(e.class)},null,8,["class"]))]),default:t(()=>[y(_(l.$t("general.filter"))+" ",1)]),_:1},512),[[X,o(u).totalExpenses]]),o(E).hasAbilities(o(h).CREATE_EXPENSE)?(i(),f(A,{key:0,class:"ml-4",variant:"primary",onClick:s[0]||(s[0]=e=>l.$router.push("expenses/create"))},{left:t(e=>[a(p,{name:"PlusIcon",class:b(e.class)},null,8,["class"])]),default:t(()=>[y(" "+_(l.$t("expenses.add_expense")),1)]),_:1})):w("",!0)]),default:t(()=>[a(N,null,{default:t(()=>[a(I,{title:l.$t("general.home"),to:"dashboard"},null,8,["title"]),a(I,{title:l.$t("expenses.expense",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),a(le,{show:o(v),class:"mt-5",onClear:j},{default:t(()=>[a($,{label:l.$t("expenses.customer")},{default:t(()=>[a(te,{modelValue:c.customer_id,"onUpdate:modelValue":s[1]||(s[1]=e=>c.customer_id=e),placeholder:l.$t("customers.type_or_click"),"value-prop":"id",label:"name"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a($,{label:l.$t("expenses.category")},{default:t(()=>[a(ae,{modelValue:c.expense_category_id,"onUpdate:modelValue":s[2]||(s[2]=e=>c.expense_category_id=e),"value-prop":"id",label:"name","track-by":"name","filter-results":!1,"resolve-on-load":"",delay:500,options:L,searchable:"",placeholder:l.$t("expenses.categories.select_a_category")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a($,{label:l.$t("expenses.from_date")},{default:t(()=>[a(z,{modelValue:c.from_date,"onUpdate:modelValue":s[3]||(s[3]=e=>c.from_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),s[8]||(s[8]=d("div",{class:"hidden w-8 h-0 mx-4 border border-gray-400 border-solid xl:block",style:{"margin-top":"1.5rem"}},null,-1)),a($,{label:l.$t("expenses.to_date")},{default:t(()=>[a(z,{modelValue:c.to_date,"onUpdate:modelValue":s[4]||(s[4]=e=>c.to_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["show"]),U(a(ne,{title:l.$t("expenses.no_expenses"),description:l.$t("expenses.list_of_expenses")},O({default:t(()=>[a(Be,{class:"mt-5 mb-4"})]),_:2},[o(E).hasAbilities(o(h).CREATE_EXPENSE)?{name:"actions",fn:t(()=>[a(A,{variant:"primary-outline",onClick:s[5]||(s[5]=e=>l.$router.push("/admin/expenses/create"))},{left:t(e=>[a(p,{name:"PlusIcon",class:b(e.class)},null,8,["class"])]),default:t(()=>[y(" "+_(l.$t("expenses.add_new_expense")),1)]),_:1})]),key:"0"}:void 0]),1032,["title","description"]),[[X,g.value]]),U(d("div",Ie,[d("div",we,[o(u).selectedExpenses.length&&o(E).hasAbilities(o(h).DELETE_EXPENSE)?(i(),f(oe,{key:0},{activator:t(()=>[d("span",Se,[y(_(l.$t("general.actions"))+" ",1),a(p,{name:"ChevronDownIcon"})])]),default:t(()=>[o(E).hasAbilities(o(h).DELETE_EXPENSE)?(i(),f(se,{key:0,onClick:Y},{default:t(()=>[a(p,{name:"TrashIcon",class:"h-5 mr-3 text-gray-600"}),y(" "+_(l.$t("general.delete")),1)]),_:1})):w("",!0)]),_:1})):w("",!0)]),a(ce,{ref_key:"tableComponent",ref:x,data:Z,columns:P.value,class:"mt-3"},O({header:t(()=>[d("div",De,[a(H,{modelValue:k.value,"onUpdate:modelValue":s[6]||(s[6]=e=>k.value=e),variant:"primary",onChange:o(u).selectAllExpenses},null,8,["modelValue","onChange"])])]),"cell-status":t(({row:e})=>[d("div",$e,[a(H,{id:e.id,modelValue:D.value,"onUpdate:modelValue":s[7]||(s[7]=ie=>D.value=ie),value:e.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":t(({row:e})=>[a(re,{to:{path:`expenses/${e.data.id}/edit`},class:"font-medium text-primary-500"},{default:t(()=>[y(_(e.data.expense_category.name),1)]),_:2},1032,["to"])]),"cell-amount":t(({row:e})=>[a(F,{amount:e.data.amount,currency:e.data.currency},null,8,["amount","currency"])]),"cell-currency":t(({row:e})=>[y(_(e.data.currency.code),1)]),"cell-base_amount":t(({row:e})=>[a(F,{amount:e.data.base_amount,currency:e.data.currency},null,8,["amount","currency"])]),"cell-base_tax":t(({row:e})=>[a(F,{amount:e.data.base_tax,currency:e.data.currency},null,8,["amount","currency"])]),"cell-base_total":t(({row:e})=>[a(F,{amount:e.data.base_total,currency:e.data.currency},null,8,["amount","currency"])]),"cell-expense_date":t(({row:e})=>[y(_(e.data.formatted_expense_date),1)]),"cell-user_name":t(({row:e})=>[a(ue,{text:e.data.customer?e.data.customer.name:"-"},null,8,["text"])]),"cell-notes":t(({row:e})=>[d("div",Fe,[d("div",Ve,_(e.data.notes?e.data.notes:"-"),1)])]),_:2},[Q()?{name:"cell-actions",fn:t(({row:e})=>[a(ke,{row:e.data,table:o(x),"load-data":M},null,8,["row","table"])]),key:"0"}:void 0]),1032,["columns"])],512),[[X,!g.value]])]),_:1})}}};export{Ne as default};
