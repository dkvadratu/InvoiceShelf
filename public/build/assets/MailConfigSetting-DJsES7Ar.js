import{v as O,e as j,I as K,j as B,f as g,g as I,h as E,as as J,i as P,k as N,r as f,c as G,o as V,a as t,b as F,w as s,l as e,p as Q,a4 as L,q as S,t as k,K as U,L as A,M as x,m as z,G as W,ah as R,Q as Y,a5 as Z}from"./main-CAtQQnL-.js";import{u as T}from"./mail-driver-DALs4zw4.js";const ee={class:"flex my-10"},X={__name:"SmtpMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n();let $=j(!1);const y=K(["none","tls","ssl","starttls"]),b=B(()=>$.value?"text":"password"),l=B(()=>({smtpConfig:{mail_driver:{required:g.withMessage(d("validation.required"),I)},mail_host:{required:g.withMessage(d("validation.required"),I)},mail_port:{required:g.withMessage(d("validation.required"),I),numeric:g.withMessage(d("validation.numbers_only"),J)},mail_encryption:{required:g.withMessage(d("validation.required"),I)},from_mail:{required:g.withMessage(d("validation.required"),I),email:g.withMessage(d("validation.email_incorrect"),E)},from_name:{required:g.withMessage(d("validation.required"),I)}}})),m=P(l,B(()=>n));N(()=>{for(const a in n.smtpConfig)p.configData.hasOwnProperty(a)&&(n.smtpConfig[a]=p.configData[a])});async function u(){return m.value.smtpConfig.$touch(),m.value.smtpConfig.$invalid||c("submit-data",n.smtpConfig),!1}function v(){m.value.smtpConfig.mail_driver.$touch(),c("on-change-driver",n.smtpConfig.mail_driver)}return(a,o)=>{const M=f("BaseMultiselect"),C=f("BaseInputGroup"),D=f("BaseInput"),q=f("BaseIcon"),w=f("BaseInputGrid"),_=f("BaseButton");return V(),G("form",{onSubmit:z(u,["prevent"])},[t(w,null,{default:s(()=>[t(C,{label:a.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_driver.$error&&e(m).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).smtpConfig.mail_driver,"onUpdate:modelValue":[o[0]||(o[0]=r=>e(n).smtpConfig.mail_driver=r),v],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(m).smtpConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.host"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_host.$error&&e(m).smtpConfig.mail_host.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_host,"onUpdate:modelValue":o[1]||(o[1]=r=>e(n).smtpConfig.mail_host=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",invalid:e(m).smtpConfig.mail_host.$error,onInput:o[2]||(o[2]=r=>e(m).smtpConfig.mail_host.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{"content-loading":i.isFetchingInitialData,label:a.$t("settings.mail.username")},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_username,"onUpdate:modelValue":o[3]||(o[3]=r=>e(n).smtpConfig.mail_username=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),t(C,{"content-loading":i.isFetchingInitialData,label:a.$t("settings.mail.password")},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_password,"onUpdate:modelValue":o[5]||(o[5]=r=>e(n).smtpConfig.mail_password=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:b.value,name:"password"},{right:s(()=>[t(q,{name:e($)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:o[4]||(o[4]=r=>Q($)?$.value=!e($):$=!e($))},null,8,["name"])]),_:1},8,["modelValue","content-loading","type"])]),_:1},8,["content-loading","label"]),t(C,{label:a.$t("settings.mail.port"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_port.$error&&e(m).smtpConfig.mail_port.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.mail_port,"onUpdate:modelValue":o[6]||(o[6]=r=>e(n).smtpConfig.mail_port=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",invalid:e(m).smtpConfig.mail_port.$error,onInput:o[7]||(o[7]=r=>e(m).smtpConfig.mail_port.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_encryption.$error&&e(m).smtpConfig.mail_encryption.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).smtpConfig.mail_encryption,"onUpdate:modelValue":o[8]||(o[8]=r=>e(n).smtpConfig.mail_encryption=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,options:y,searchable:!0,"show-labels":!1,placeholder:"Select option",invalid:e(m).smtpConfig.mail_encryption.$error,onInput:o[9]||(o[9]=r=>e(m).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.from_mail.$error&&e(m).smtpConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.from_mail,"onUpdate:modelValue":o[10]||(o[10]=r=>e(n).smtpConfig.from_mail=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(m).smtpConfig.from_mail.$error,onInput:o[11]||(o[11]=r=>e(m).smtpConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.from_name.$error&&e(m).smtpConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).smtpConfig.from_name,"onUpdate:modelValue":o[12]||(o[12]=r=>e(n).smtpConfig.from_name=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",invalid:e(m).smtpConfig.from_name.$error,onInput:o[13]||(o[13]=r=>e(m).smtpConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",ee,[t(_,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,type:"submit",variant:"primary"},{left:s(r=>[i.isSaving?A("",!0):(V(),U(q,{key:0,name:"ArrowDownOnSquareIcon",class:x(r.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(a.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),L(a.$slots,"default")])],32)}}},ie={class:"flex my-10"},ne={__name:"MailgunMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n();let $=j(!1);const y=B(()=>$.value?"text":"password"),b=B(()=>({mailgunConfig:{mail_driver:{required:g.withMessage(d("validation.required"),I)},mail_mailgun_domain:{required:g.withMessage(d("validation.required"),I)},mail_mailgun_endpoint:{required:g.withMessage(d("validation.required"),I)},mail_mailgun_secret:{required:g.withMessage(d("validation.required"),I)},from_mail:{required:g.withMessage(d("validation.required"),I),email:E},from_name:{required:g.withMessage(d("validation.required"),I)}}})),l=P(b,B(()=>n));N(()=>{for(const v in n.mailgunConfig)p.configData.hasOwnProperty(v)&&(n.mailgunConfig[v]=p.configData[v])});async function m(){return l.value.mailgunConfig.$touch(),l.value.mailgunConfig.$invalid||c("submit-data",n.mailgunConfig),!1}function u(){l.value.mailgunConfig.mail_driver.$touch(),c("on-change-driver",n.mailgunConfig.mail_driver)}return(v,a)=>{const o=f("BaseMultiselect"),M=f("BaseInputGroup"),C=f("BaseInput"),D=f("BaseIcon"),q=f("BaseInputGrid"),w=f("BaseButton");return V(),G("form",{onSubmit:z(m,["prevent"])},[t(q,null,{default:s(()=>[t(M,{label:v.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(o,{modelValue:e(n).mailgunConfig.mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=_=>e(n).mailgunConfig.mail_driver=_),u],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:s(()=>[t(C,{modelValue:e(n).mailgunConfig.mail_mailgun_domain,"onUpdate:modelValue":a[1]||(a[1]=_=>e(n).mailgunConfig.mail_mailgun_domain=_),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,onInput:a[2]||(a[2]=_=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:s(()=>[t(C,{modelValue:e(n).mailgunConfig.mail_mailgun_secret,"onUpdate:modelValue":a[4]||(a[4]=_=>e(n).mailgunConfig.mail_mailgun_secret=_),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:y.value,name:"mailgun_secret",autocomplete:"off",invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,onInput:a[5]||(a[5]=_=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:s(()=>[t(D,{name:e($)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:a[3]||(a[3]=_=>Q($)?$.value=!e($):$=!e($))},null,8,["name"])]),_:1},8,["modelValue","content-loading","type","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:s(()=>[t(C,{modelValue:e(n).mailgunConfig.mail_mailgun_endpoint,"onUpdate:modelValue":a[6]||(a[6]=_=>e(n).mailgunConfig.mail_mailgun_endpoint=_),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,onInput:a[7]||(a[7]=_=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(C,{modelValue:e(n).mailgunConfig.from_mail,"onUpdate:modelValue":a[8]||(a[8]=_=>e(n).mailgunConfig.from_mail=_),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(l).mailgunConfig.from_mail.$error,onInput:a[9]||(a[9]=_=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(M,{label:v.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(C,{modelValue:e(n).mailgunConfig.from_name,"onUpdate:modelValue":a[10]||(a[10]=_=>e(n).mailgunConfig.from_name=_),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",invalid:e(l).mailgunConfig.from_name.$error,onInput:a[11]||(a[11]=_=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",ie,[t(w,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(_=>[i.isSaving?A("",!0):(V(),U(D,{key:0,name:"ArrowDownOnSquareIcon",class:x(_.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(v.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),L(v.$slots,"default")])],32)}}},ae={class:"flex my-10"},te={__name:"SesMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n();let $=j(!1);const y=K(["tls","ssl","starttls"]),b=B(()=>({sesConfig:{mail_driver:{required:g.withMessage(d("validation.required"),I)},mail_host:{required:g.withMessage(d("validation.required"),I)},mail_port:{required:g.withMessage(d("validation.required"),I),numeric:J},mail_ses_key:{required:g.withMessage(d("validation.required"),I)},mail_ses_secret:{required:g.withMessage(d("validation.required"),I)},mail_encryption:{required:g.withMessage(d("validation.required"),I)},from_mail:{required:g.withMessage(d("validation.required"),I),email:g.withMessage(d("validation.email_incorrect"),E)},from_name:{required:g.withMessage(d("validation.required"),I)}}})),l=P(b,B(()=>n)),m=B(()=>$.value?"text":"password");N(()=>{for(const a in n.sesConfig)p.configData.hasOwnProperty(a)&&(n.sesConfig[a]=p.configData[a])});async function u(){return l.value.sesConfig.$touch(),l.value.sesConfig.$invalid||c("submit-data",n.sesConfig),!1}function v(){l.value.sesConfig.mail_driver.$touch(),c("on-change-driver",n.sesConfig.mail_driver)}return(a,o)=>{const M=f("BaseMultiselect"),C=f("BaseInputGroup"),D=f("BaseInput"),q=f("BaseIcon"),w=f("BaseInputGrid"),_=f("BaseButton");return V(),G("form",{onSubmit:z(u,["prevent"])},[t(w,null,{default:s(()=>[t(C,{label:a.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).sesConfig.mail_driver,"onUpdate:modelValue":[o[0]||(o[0]=r=>e(n).sesConfig.mail_driver=r),v],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.host"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_host,"onUpdate:modelValue":o[1]||(o[1]=r=>e(n).sesConfig.mail_host=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",invalid:e(l).sesConfig.mail_host.$error,onInput:o[2]||(o[2]=r=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.port"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_port,"onUpdate:modelValue":o[3]||(o[3]=r=>e(n).sesConfig.mail_port=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",invalid:e(l).sesConfig.mail_port.$error,onInput:o[4]||(o[4]=r=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:s(()=>[t(M,{modelValue:e(n).sesConfig.mail_encryption,"onUpdate:modelValue":o[5]||(o[5]=r=>e(n).sesConfig.mail_encryption=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,options:y,invalid:e(l).sesConfig.mail_encryption.$error,placeholder:"Select option",onInput:o[6]||(o[6]=r=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.from_mail,"onUpdate:modelValue":o[7]||(o[7]=r=>e(n).sesConfig.from_mail=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(l).sesConfig.from_mail.$error,onInput:o[8]||(o[8]=r=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.from_name,"onUpdate:modelValue":o[9]||(o[9]=r=>e(n).sesConfig.from_name=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"name",invalid:e(l).sesConfig.from_name.$error,onInput:o[10]||(o[10]=r=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_ses_key,"onUpdate:modelValue":o[11]||(o[11]=r=>e(n).sesConfig.mail_ses_key=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",invalid:e(l).sesConfig.mail_ses_key.$error,onInput:o[12]||(o[12]=r=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(C,{label:a.$t("settings.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).mail_ses_secret.$errors[0].$message,required:""},{default:s(()=>[t(D,{modelValue:e(n).sesConfig.mail_ses_secret,"onUpdate:modelValue":o[14]||(o[14]=r=>e(n).sesConfig.mail_ses_secret=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:m.value,name:"mail_ses_secret",autocomplete:"off",invalid:e(l).sesConfig.mail_ses_secret.$error,onInput:o[15]||(o[15]=r=>e(l).sesConfig.mail_ses_secret.$touch())},{right:s(()=>[t(q,{name:e($)?"EyeIcon":"EyeSlashIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:o[13]||(o[13]=r=>Q($)?$.value=!e($):$=!e($))},null,8,["name"])]),_:1},8,["modelValue","content-loading","type","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",ae,[t(_,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(r=>[i.isSaving?A("",!0):(V(),U(q,{key:0,name:"ArrowDownOnSquareIcon",class:x(r.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(a.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),L(a.$slots,"default")])],32)}}},oe={class:"flex mt-8"},H={__name:"BasicMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const p=i,c=h,n=T(),{t:d}=O.useI18n(),$=B(()=>({basicMailConfig:{mail_driver:{required:g.withMessage(d("validation.required"),I)},from_mail:{required:g.withMessage(d("validation.required"),I),email:g.withMessage(d("validation.email_incorrect"),E)},from_name:{required:g.withMessage(d("validation.required"),I)}}})),y=P($,B(()=>n));N(()=>{for(const m in n.basicMailConfig)p.configData.hasOwnProperty(m)&&n.$patch(u=>{u.basicMailConfig[m]=p.configData[m]})});async function b(){return y.value.basicMailConfig.$touch(),y.value.basicMailConfig.$invalid||c("submit-data",n.basicMailConfig),!1}function l(){y.value.basicMailConfig.mail_driver.$touch(),c("on-change-driver",n.basicMailConfig.mail_driver)}return(m,u)=>{const v=f("BaseMultiselect"),a=f("BaseInputGroup"),o=f("BaseInput"),M=f("BaseInputGrid"),C=f("BaseIcon"),D=f("BaseButton");return V(),G("form",{onSubmit:z(b,["prevent"])},[t(M,null,{default:s(()=>[t(a,{label:m.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(y).basicMailConfig.mail_driver.$error&&e(y).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[t(v,{modelValue:e(n).basicMailConfig.mail_driver,"onUpdate:modelValue":[u[0]||(u[0]=q=>e(n).basicMailConfig.mail_driver=q),l],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(y).basicMailConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),t(a,{label:m.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(y).basicMailConfig.from_mail.$error&&e(y).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[t(o,{modelValue:e(n).basicMailConfig.from_mail,"onUpdate:modelValue":u[1]||(u[1]=q=>e(n).basicMailConfig.from_mail=q),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(y).basicMailConfig.from_mail.$error,onInput:u[2]||(u[2]=q=>e(y).basicMailConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(a,{label:m.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(y).basicMailConfig.from_name.$error&&e(y).basicMailConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[t(o,{modelValue:e(n).basicMailConfig.from_name,"onUpdate:modelValue":u[3]||(u[3]=q=>e(n).basicMailConfig.from_name=q),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"name",invalid:e(y).basicMailConfig.from_name.$error,onInput:u[4]||(u[4]=q=>e(y).basicMailConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),F("div",oe,[t(D,{"content-loading":i.isFetchingInitialData,disabled:i.isSaving,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(q=>[i.isSaving?A("",!0):(V(),U(C,{key:0,class:x(q.class),name:"ArrowDownOnSquareIcon"},null,8,["class"]))]),default:s(()=>[S(" "+k(m.$t("general.save")),1)]),_:1},8,["content-loading","disabled","loading"]),L(m.$slots,"default")])],32)}}},le={class:"flex justify-between w-full"},re={class:"p-4 md:p-8"},se={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid"},me={__name:"MailTestModal",setup(i){let h=j(!1),p=K({to:"",subject:"",message:""});const c=W(),n=T(),{t:d}=O.useI18n(),$=B(()=>c.active&&c.componentName==="MailTestModal"),y={formData:{to:{required:g.withMessage(d("validation.required"),I),email:g.withMessage(d("validation.email_incorrect"),E)},subject:{required:g.withMessage(d("validation.required"),I),maxLength:g.withMessage(d("validation.subject_maxlength"),R(100))},message:{required:g.withMessage(d("validation.required"),I),maxLength:g.withMessage(d("validation.message_maxlength"),R(255))}}},b=P(y,{formData:p});function l(){p.id="",p.to="",p.subject="",p.message="",b.value.$reset()}async function m(){if(b.value.formData.$touch(),b.value.$invalid)return!0;h.value=!0,(await n.sendTestMail(p)).data&&(u(),h.value=!1)}function u(){c.closeModal(),setTimeout(()=>{c.resetModalData(),l()},300)}return(v,a)=>{const o=f("BaseIcon"),M=f("BaseInput"),C=f("BaseInputGroup"),D=f("BaseTextarea"),q=f("BaseInputGrid"),w=f("BaseButton"),_=f("BaseModal");return V(),U(_,{show:$.value,onClose:u},{header:s(()=>[F("div",le,[S(k(e(c).title)+" ",1),t(o,{name:"XMarkIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:u})])]),default:s(()=>[F("form",{action:"",onSubmit:z(m,["prevent"])},[F("div",re,[t(q,{layout:"one-column"},{default:s(()=>[t(C,{label:v.$t("general.to"),error:e(b).formData.to.$error&&e(b).formData.to.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[t(M,{ref:"to",modelValue:e(p).to,"onUpdate:modelValue":a[0]||(a[0]=r=>e(p).to=r),type:"text",invalid:e(b).formData.to.$error,onInput:a[1]||(a[1]=r=>e(b).formData.to.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(C,{label:v.$t("general.subject"),error:e(b).formData.subject.$error&&e(b).formData.subject.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[t(M,{modelValue:e(p).subject,"onUpdate:modelValue":a[2]||(a[2]=r=>e(p).subject=r),type:"text",invalid:e(b).formData.subject.$error,onInput:a[3]||(a[3]=r=>e(b).formData.subject.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(C,{label:v.$t("general.message"),error:e(b).formData.message.$error&&e(b).formData.message.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[t(D,{modelValue:e(p).message,"onUpdate:modelValue":a[4]||(a[4]=r=>e(p).message=r),rows:"4",cols:"50",invalid:e(b).formData.message.$error,onInput:a[5]||(a[5]=r=>e(b).formData.message.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1})]),F("div",se,[t(w,{variant:"primary-outline",type:"button",class:"mr-3",onClick:a[6]||(a[6]=r=>u())},{default:s(()=>[S(k(v.$t("general.cancel")),1)]),_:1}),t(w,{loading:e(h),variant:"primary",type:"submit"},{left:s(r=>[e(h)?A("",!0):(V(),U(o,{key:0,name:"PaperAirplaneIcon",class:x(r.class)},null,8,["class"]))]),default:s(()=>[S(" "+k(v.$t("general.send")),1)]),_:1},8,["loading"])])],32)]),_:1},8,["show"])}}},de={key:0,class:"mt-14"},fe={__name:"MailConfigSetting",setup(i){let h=j(!1),p=j(!1);const c=T(),n=W(),{t:d}=O.useI18n();y();function $(u){c.mail_driver=u,c.mailConfigData.mail_driver=u}async function y(){p.value=!0,Promise.all([await c.fetchMailDrivers(),await c.fetchMailConfig()]).then(([u])=>{p.value=!1})}const b=B(()=>c.mail_driver=="smtp"?X:c.mail_driver=="mailgun"?ne:c.mail_driver=="sendmail"?H:c.mail_driver=="ses"?te:c.mail_driver=="mail"?H:X);async function l(u){try{return h.value=!0,await c.updateMailConfig(u),h.value=!1,!0}catch(v){console.error(v)}}function m(){n.openModal({title:d("general.test_mail_conf"),componentName:"MailTestModal",size:"sm"})}return(u,v)=>{const a=f("BaseButton"),o=f("BaseSettingCard");return V(),G(Y,null,[t(me),t(o,{title:u.$t("settings.mail.mail_config"),description:u.$t("settings.mail.mail_config_desc")},{default:s(()=>[e(c)&&e(c).mailConfigData?(V(),G("div",de,[(V(),U(Z(b.value),{"config-data":e(c).mailConfigData,"is-saving":e(h),"mail-drivers":e(c).mail_drivers,"is-fetching-initial-data":e(p),onOnChangeDriver:v[0]||(v[0]=M=>$(M)),onSubmitData:l},{default:s(()=>[t(a,{variant:"primary-outline",type:"button",class:"ml-2","content-loading":e(p),onClick:m},{default:s(()=>[S(k(u.$t("general.test_mail_conf")),1)]),_:1},8,["content-loading"])]),_:1},40,["config-data","is-saving","mail-drivers","is-fetching-initial-data"]))])):A("",!0)]),_:1},8,["title","description"])],64)}}};export{fe as default};
