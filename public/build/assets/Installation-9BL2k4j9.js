import{a6 as $e,F as ee,s as G,a3 as j,e as M,k as Z,K as U,w as c,r as w,o as S,b as V,ae,a,l as e,p as te,q as L,t as k,M as W,af as ne,j as z,L as O,c as P,Q as re,R as se,v as R,a9 as fe,I as Y,f as y,a7 as ie,g as B,i as x,aW as K,aF as de,m as A,as as oe,a0 as ue,u as me,a5 as ce,h as Q,O as pe,a2 as we,aj as he,J as ye,H as _e,ah as ge,n as be,aX as Ie}from"./main-DlOnIu1m.js";import{u as X}from"./mail-driver-CfCYtqdR.js";const J=(i=!1)=>{const D=i?window.pinia.defineStore:$e,{global:C}=window.i18n,r=ee();return D({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,database_overwrite:!1,app_url:window.location.origin,app_locale:null}}),actions:{fetchInstallationLanguages(){return new Promise((s,l)=>{G.get("/api/v1/installation/languages").then(u=>{s(u)}).catch(u=>{j(u),l(u)})})},fetchInstallationRequirements(){return new Promise((s,l)=>{G.get("/api/v1/installation/requirements").then(u=>{s(u)}).catch(u=>{j(u),l(u)})})},fetchInstallationStep(){return new Promise((s,l)=>{G.get("/api/v1/installation/wizard-step").then(u=>{s(u)}).catch(u=>{j(u),l(u)})})},addInstallationStep(s){return new Promise((l,u)=>{G.post("/api/v1/installation/wizard-step",s).then(n=>{l(n)}).catch(n=>{j(n),u(n)})})},addInstallationLanguage(s){return new Promise((l,u)=>{G.post("/api/v1/installation/wizard-language",s).then(n=>{l(n)}).catch(n=>{j(n),u(n)})})},fetchInstallationPermissions(){return new Promise((s,l)=>{G.get("/api/v1/installation/permissions").then(u=>{s(u)}).catch(u=>{j(u),l(u)})})},fetchInstallationDatabase(s){return new Promise((l,u)=>{G.get("/api/v1/installation/database/config",{params:s}).then(n=>{l(n)}).catch(n=>{j(n),u(n)})})},addInstallationDatabase(s){return new Promise((l,u)=>{G.post("/api/v1/installation/database/config",s).then(n=>{l(n)}).catch(n=>{j(n),u(n)})})},addInstallationFinish(){return new Promise((s,l)=>{G.post("/api/v1/installation/finish").then(u=>{s(u)}).catch(u=>{j(u),l(u)})})},setInstallationDomain(s){return new Promise((l,u)=>{G.put("/api/v1/installation/set-domain",s).then(n=>{l(n)}).catch(n=>{j(n),u(n)})})},installationLogin(){return new Promise((s,l)=>{G.get("/sanctum/csrf-cookie").then(u=>{u&&G.post("/api/v1/installation/login").then(n=>{r.setSelectedCompany(n.data.company),s(n)}).catch(n=>{j(n),l(n)})})})},checkAutheticated(){return new Promise((s,l)=>{G.get("/api/v1/auth/check").then(u=>{s(u)}).catch(u=>{l(u)})})}}})()},Ve={class:"w-full md:w-2/3"},qe={class:"mb-6"},Be={__name:"Step0SetLanguage",emits:["next"],setup(i,{emit:D}){const{global:C}=window.i18n,r=D;let s=M(!1),l=M(!1),u=M([]),n="en";const g=J();Z(()=>{d()});async function d(){s.value=!0;const $=await g.fetchInstallationLanguages();u.value=$.data.languages,s.value=!1}function f(){l.value=!0,r("next"),l.value=!1}function o($){typeof C.locale!="string"&&(C.locale.value=$)}return($,t)=>{const m=w("BaseMultiselect"),_=w("BaseInputGroup"),q=w("BaseIcon"),b=w("BaseButton"),v=w("BaseWizardStep");return S(),U(v,{title:$.$t("wizard.install_language.title"),description:$.$t("wizard.install_language.description")},{default:c(()=>[V("div",Ve,[V("div",qe,[a(_,{label:$.$t("wizard.language"),"content-loading":e(s),required:""},{default:c(()=>[a(m,{modelValue:e(n),"onUpdate:modelValue":t[0]||(t[0]=h=>te(n)?n.value=h:n=h),"content-loading":e(s),options:e(u),label:"name","value-prop":"code",placeholder:$.$t("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,onChange:o},null,8,["modelValue","content-loading","options","placeholder"])]),_:1},8,["label","content-loading"])]),ae(a(b,{onClick:f},{left:c(h=>[a(q,{name:"ArrowRightIcon",class:W(h.class)},null,8,["class"])]),default:c(()=>[L(k($.$t("wizard.continue"))+" ",1)]),_:1},512),[[ne,!e(s)]])])]),_:1},8,["title","description"])}}},Ce={class:"w-full md:w-2/3"},De={class:"mb-6"},Se={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},Fe={class:"col-span-2 text-sm"},Me={class:"text-right"},ze={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ke={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ue={key:1},Pe={class:"col-span-2 text-sm"},Le={class:"text-right"},Ne={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},Ee={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ge={__name:"Step1RequirementsCheck",emits:["next"],setup(i,{emit:D}){const C=D,r=M(""),s=M(""),l=M(!1);M(!0);const u=J();Z(async()=>{g()});const n=z(()=>{if(r.value){let f=!0;for(const o in r.value)return r.value[o]||(f=!1),r.value&&s.value.supported&&f}return!1});async function g(){var o,$,t,m;l.value=!0;const f=await u.fetchInstallationRequirements();f.data&&(r.value=(t=($=(o=f==null?void 0:f.data)==null?void 0:o.requirements)==null?void 0:$.requirements)==null?void 0:t.php,s.value=(m=f==null?void 0:f.data)==null?void 0:m.phpSupportInfo)}function d(){l.value=!0,C("next"),l.value=!1}return(f,o)=>{const $=w("BaseIcon"),t=w("BaseButton"),m=w("BaseWizardStep");return S(),U(m,{title:f.$t("wizard.req.system_req"),description:f.$t("wizard.req.system_req_desc")},{default:c(()=>[V("div",Ce,[V("div",De,[s.value?(S(),P("div",Se,[V("div",Fe,k(f.$t("wizard.req.php_req_version",{version:s.value.minimum})),1),V("div",Me,[L(k(s.value.current)+" ",1),s.value.supported?(S(),P("span",ze)):(S(),P("span",ke))])])):O("",!0),r.value?(S(),P("div",Ue,[(S(!0),P(re,null,se(r.value,(_,q)=>(S(),P("div",{key:q,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[V("div",Pe,k(q),1),V("div",Le,[_?(S(),P("span",Ne)):(S(),P("span",Ee))])]))),128))])):O("",!0)]),n.value?(S(),U(t,{key:0,onClick:d},{left:c(_=>[a($,{name:"ArrowRightIcon",class:W(_.class)},null,8,["class"])]),default:c(()=>[L(k(f.$t("wizard.continue"))+" ",1)]),_:1})):O("",!0),r.value?O("",!0):(S(),U(t,{key:1,loading:l.value,disabled:l.value,onClick:g},{default:c(()=>[L(k(f.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Oe={key:1,class:"relative"},We={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Re={class:"col-span-2 p-3"},Te={class:"p-3 text-right"},je={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},xe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},Ae={__name:"Step2PermissionCheck",emits:["next"],setup(i,{emit:D}){const C=D;let r=M(!1),s=M(!1),l=M([]);const{tm:u,t:n}=R.useI18n(),g=J(),d=fe();Z(()=>{f()});async function f(){r.value=!0;const $=await g.fetchInstallationPermissions();l.value=$.data.permissions.permissions,$.data&&$.data.permissions.errors&&setTimeout(()=>{d.openDialog({title:u("wizard.permissions.permission_confirm_title"),message:n("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(t=>{t.data&&(r.value=!1)})},500),r.value=!1}function o(){s.value=!0,C("next"),s.value=!1}return($,t)=>{const m=w("BaseContentPlaceholdersText"),_=w("BaseContentPlaceholdersBox"),q=w("BaseContentPlaceholders"),b=w("BaseIcon"),v=w("BaseButton"),h=w("BaseWizardStep");return S(),U(h,{title:$.$t("wizard.permissions.permissions"),description:$.$t("wizard.permissions.permission_desc")},{default:c(()=>[e(r)?(S(),U(q,{key:0},{default:c(()=>[(S(),P(re,null,se(3,(p,I)=>V("div",{key:I,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[a(m,{lines:1,class:"col-span-4 p-3"})])),64)),a(_,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(S(),P("div",Oe,[(S(!0),P(re,null,se(e(l),(p,I)=>(S(),P("div",{key:I,class:"border border-gray-200"},[V("div",We,[V("div",Re,k(p.folder),1),V("div",Te,[p.isSet?(S(),P("span",je)):(S(),P("span",xe)),V("span",null,k(p.permission),1)])])]))),128)),ae(a(v,{class:"mt-10",loading:e(s),disabled:e(s),onClick:o},{left:c(p=>[a(b,{name:"ArrowRightIcon",class:W(p.class)},null,8,["class"])]),default:c(()=>[L(" "+k($.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[ne,!e(r)]])]))]),_:1},8,["title","description"])}}},Ye={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Je={class:"w-full"},Ke={__name:"MysqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=i,r=D,s=Y(["sqlite","mysql","pgsql"]),{t:l}=R.useI18n(),u=ie("utils"),n=J();Z(()=>{for(const m in g.value)C.configData.hasOwnProperty(m)&&(g.value[m]=C.configData[m])});const g=z(()=>n.currentDataBaseData),d=m=>u.checkValidUrl(m),f={database_connection:{required:y.withMessage(l("validation.required"),B)},database_hostname:{required:y.withMessage(l("validation.required"),B)},database_port:{required:y.withMessage(l("validation.required"),B),numeric:oe},database_name:{required:y.withMessage(l("validation.required"),B)},database_username:{required:y.withMessage(l("validation.required"),B)},app_url:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_url"),d)}},o=x(f,g.value);function $(){if(o.value.$touch(),o.value.$invalid)return!0;r("submit-data",g.value)}function t(){o.value.database_connection.$touch(),r("on-change-driver",g.value.database_connection)}return(m,_)=>{const q=w("BaseInput"),b=w("BaseMultiselect"),v=w("BaseIcon"),h=w("BaseButton");return S(),P("form",{action:"",onSubmit:A($,["prevent"])},[V("div",Ye,[a(K,{label:m.$t("wizard.database.app_url"),error:e(o).app_url.$error&&e(o).app_url.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.app_url,"onUpdate:modelValue":_[0]||(_[0]=p=>g.value.app_url=p),invalid:e(o).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(K,{label:m.$t("wizard.database.connection"),error:e(o).database_connection.$error&&e(o).database_connection.$errors[0].$message,required:""},{default:c(()=>[a(b,{modelValue:g.value.database_connection,"onUpdate:modelValue":[_[1]||(_[1]=p=>g.value.database_connection=p),t],invalid:e(o).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),a(K,{label:m.$t("wizard.database.port"),error:e(o).database_port.$error&&e(o).database_port.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_port,"onUpdate:modelValue":_[2]||(_[2]=p=>g.value.database_port=p),invalid:e(o).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(K,{label:m.$t("wizard.database.db_name"),error:e(o).database_name.$error&&e(o).database_name.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_name,"onUpdate:modelValue":_[3]||(_[3]=p=>g.value.database_name=p),invalid:e(o).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(K,{label:m.$t("wizard.database.username"),error:e(o).database_username.$error&&e(o).database_username.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_username,"onUpdate:modelValue":_[4]||(_[4]=p=>g.value.database_username=p),invalid:e(o).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(K,{label:m.$t("wizard.database.password")},{default:c(()=>[a(q,{modelValue:g.value.database_password,"onUpdate:modelValue":_[5]||(_[5]=p=>g.value.database_password=p),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),a(K,{label:m.$t("wizard.database.host"),error:e(o).database_hostname.$error&&e(o).database_hostname.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_hostname,"onUpdate:modelValue":_[6]||(_[6]=p=>g.value.database_hostname=p),invalid:e(o).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),V("div",Je,[a(de,{modelValue:g.value.database_overwrite,"onUpdate:modelValue":_[7]||(_[7]=p=>g.value.database_overwrite=p),label:m.$t("wizard.database.overwrite")},null,8,["modelValue","label"])]),a(h,{type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:c(p=>[i.isSaving?O("",!0):(S(),U(v,{key:0,name:"SaveIcon",class:W(p.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(m.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)}}},Ze={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},He={class:"w-full"},Qe={__name:"PgsqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=i,r=D,s=Y(["sqlite","mysql","pgsql"]),{t:l}=R.useI18n(),u=ie("utils"),n=J(),g=z(()=>n.currentDataBaseData);Z(()=>{for(const m in g.value)C.configData.hasOwnProperty(m)&&(g.value[m]=C.configData[m])});const d=m=>u.checkValidUrl(m),f={database_connection:{required:y.withMessage(l("validation.required"),B)},database_hostname:{required:y.withMessage(l("validation.required"),B)},database_port:{required:y.withMessage(l("validation.required"),B),numeric:oe},database_name:{required:y.withMessage(l("validation.required"),B)},database_username:{required:y.withMessage(l("validation.required"),B)},app_url:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_url"),d)}},o=x(f,g.value);function $(){if(o.value.$touch(),o.value.$invalid)return!0;r("submit-data",g.value)}function t(){o.value.database_connection.$touch(),r("on-change-driver",g.value.database_connection)}return(m,_)=>{const q=w("BaseInput"),b=w("BaseInputGroup"),v=w("BaseMultiselect"),h=w("BaseIcon"),p=w("BaseButton");return S(),P("form",{action:"",onSubmit:A($,["prevent"])},[V("div",Ze,[a(b,{label:m.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(o).app_url.$error&&e(o).app_url.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.app_url,"onUpdate:modelValue":_[0]||(_[0]=I=>g.value.app_url=I),"content-loading":i.isFetchingInitialData,invalid:e(o).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(b,{label:m.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(o).database_connection.$error&&e(o).database_connection.$errors[0].$message,required:""},{default:c(()=>[a(v,{modelValue:g.value.database_connection,"onUpdate:modelValue":[_[1]||(_[1]=I=>g.value.database_connection=I),t],"content-loading":i.isFetchingInitialData,invalid:e(o).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(b,{label:m.$t("wizard.database.port"),"content-loading":i.isFetchingInitialData,error:e(o).database_port.$error&&e(o).database_port.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_port,"onUpdate:modelValue":_[2]||(_[2]=I=>g.value.database_port=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(b,{label:m.$t("wizard.database.db_name"),"content-loading":i.isFetchingInitialData,error:e(o).database_name.$error&&e(o).database_name.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_name,"onUpdate:modelValue":_[3]||(_[3]=I=>g.value.database_name=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(b,{label:m.$t("wizard.database.username"),"content-loading":i.isFetchingInitialData,error:e(o).database_username.$error&&e(o).database_username.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_username,"onUpdate:modelValue":_[4]||(_[4]=I=>g.value.database_username=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(b,{"content-loading":i.isFetchingInitialData,label:m.$t("wizard.database.password")},{default:c(()=>[a(q,{modelValue:g.value.database_password,"onUpdate:modelValue":_[5]||(_[5]=I=>g.value.database_password=I),"content-loading":i.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),a(b,{label:m.$t("wizard.database.host"),"content-loading":i.isFetchingInitialData,error:e(o).database_hostname.$error&&e(o).database_hostname.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_hostname,"onUpdate:modelValue":_[6]||(_[6]=I=>g.value.database_hostname=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),V("div",He,[a(de,{modelValue:g.value.database_overwrite,"onUpdate:modelValue":_[7]||(_[7]=I=>g.value.database_overwrite=I),label:m.$t("wizard.database.overwrite")},null,8,["modelValue","label"])]),ae(a(p,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:c(I=>[i.isSaving?O("",!0):(S(),U(h,{key:0,name:"SaveIcon",class:W(I.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(m.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[ne,!i.isFetchingInitialData]])],32)}}},Xe={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},ea={class:"w-full"},aa={__name:"SqliteDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=i,r=D,s=Y(["sqlite","mysql","pgsql"]),{t:l}=R.useI18n(),u=ie("utils"),n=J(),g=z(()=>n.currentDataBaseData);Z(()=>{for(const m in g.value)C.configData.hasOwnProperty(m)&&(g.value[m]=C.configData[m])});const d=m=>u.checkValidUrl(m),f={database_connection:{required:y.withMessage(l("validation.required"),B)},database_name:{required:y.withMessage(l("validation.required"),B)},app_url:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_url"),d)}},o=x(f,g.value);function $(){if(o.value.$touch(),o.value.$invalid)return!0;r("submit-data",g.value)}function t(){o.value.database_connection.$touch(),r("on-change-driver",g.value.database_connection)}return(m,_)=>{const q=w("BaseInput"),b=w("BaseInputGroup"),v=w("BaseMultiselect"),h=w("BaseIcon"),p=w("BaseButton");return S(),P("form",{action:"",onSubmit:A($,["prevent"])},[V("div",Xe,[a(b,{label:m.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(o).app_url.$error&&e(o).app_url.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:g.value.app_url,"onUpdate:modelValue":_[0]||(_[0]=I=>g.value.app_url=I),"content-loading":i.isFetchingInitialData,invalid:e(o).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(b,{label:m.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(o).database_connection.$error&&e(o).database_connection.$errors[0].$message,required:""},{default:c(()=>[a(v,{modelValue:g.value.database_connection,"onUpdate:modelValue":[_[1]||(_[1]=I=>g.value.database_connection=I),t],"content-loading":i.isFetchingInitialData,invalid:e(o).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(b,{label:m.$t("wizard.database.db_path"),error:e(o).database_name.$error&&e(o).database_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(q,{modelValue:g.value.database_name,"onUpdate:modelValue":_[2]||(_[2]=I=>g.value.database_name=I),"content-loading":i.isFetchingInitialData,invalid:e(o).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),V("div",ea,[a(de,{modelValue:g.value.database_overwrite,"onUpdate:modelValue":_[3]||(_[3]=I=>g.value.database_overwrite=I),label:m.$t("wizard.database.overwrite")},null,8,["modelValue","label"])]),ae(a(p,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:c(I=>[i.isSaving?O("",!0):(S(),U(h,{key:0,name:"SaveIcon",class:W(I.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(m.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[ne,!i.isFetchingInitialData]])],32)}}},ta={components:{Mysql:Ke,Pgsql:Qe,Sqlite:aa},emits:["next"],setup(i,{emit:D}){const C=M("mysql"),r=M(!1),{t:s}=R.useI18n(),{global:l}=window.i18n,u=me(),n=J(),g=z(()=>(n.currentDataBaseData.app_locale=l.locale.value,n.currentDataBaseData));async function d(o){let $={connection:o};const t=await n.fetchInstallationDatabase($);t.data.success&&(g.value.database_connection=t.data.config.database_connection),o==="sqlite"?g.value.database_name=t.data.config.database_name:g.value.database_name=null}async function f(o){r.value=!0;try{let $=await n.addInstallationDatabase(o);if(r.value=!1,$.data.success){await n.addInstallationFinish(),D("next",3);let t={profile_language:l.locale.value};await n.addInstallationLanguage(t),u.showNotification({type:"success",message:s("wizard.success."+$.data.success)});return}else if($.data.error){if($.data.requirement){u.showNotification({type:"error",message:s("wizard.errors."+$.data.error,{version:$.data.requirement.minimum,name:o.value.database_connection})});return}u.showNotification({type:"error",message:s("wizard.errors."+$.data.error)})}else $.data.errors?u.showNotification({type:"error",message:$.data.errors[0]}):$.data.error_message&&u.showNotification({type:"error",message:$.data.error_message})}catch{u.showNotification({type:"error",message:s("validation.something_went_wrong")}),r.value=!1}finally{r.value=!1}}return{databaseData:g,database_connection:C,isSaving:r,getDatabaseConfig:d,next:f}}};function na(i,D,C,r,s,l){const u=w("BaseWizardStep");return S(),U(u,{title:i.$t("wizard.database.database"),description:i.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:c(()=>[(S(),U(ce(r.databaseData.database_connection),{"config-data":r.databaseData,"is-saving":r.isSaving,onOnChangeDriver:r.getDatabaseConfig,onSubmitData:r.next},null,40,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}const ia=ue(ta,[["render",na]]),oa={class:"w-full md:w-2/3"},la={class:"mt-4 mb-0 text-sm text-gray-600"},ra={class:"w-full text-gray-600 list-disc list-inside"},sa={class:"text-sm leading-8"},da={class:"text-sm leading-8"},ua={__name:"Step4VerifyDomain",emits:["next"],setup(i,{emit:D}){const C=D,r=Y({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),s=M(!1),{t:l}=R.useI18n(),u=ie("utils"),n=t=>u.checkValidDomainUrl(t),g=J(),d=me(),f={app_domain:{required:y.withMessage(l("validation.required"),B),isUrl:y.withMessage(l("validation.invalid_domain_url"),n)}},o=x(f,z(()=>r));async function $(){if(o.value.$touch(),o.value.$invalid)return!0;s.value=!0;try{await g.setInstallationDomain(r),await g.installationLogin(),(await g.checkAutheticated()).data&&C("next",4),s.value=!1}catch{d.showNotification({type:"error",message:l("wizard.verify_domain.failed")}),s.value=!1}}return(t,m)=>{const _=w("BaseInput"),q=w("BaseInputGroup"),b=w("BaseButton"),v=w("BaseWizardStep");return S(),U(v,{title:t.$t("wizard.verify_domain.title"),description:t.$t("wizard.verify_domain.desc")},{default:c(()=>[V("div",oa,[a(q,{label:t.$t("wizard.verify_domain.app_domain"),error:e(o).app_domain.$error&&e(o).app_domain.$errors[0].$message,required:""},{default:c(()=>[a(_,{modelValue:r.app_domain,"onUpdate:modelValue":m[0]||(m[0]=h=>r.app_domain=h),invalid:e(o).app_domain.$error,type:"text",onInput:m[1]||(m[1]=h=>e(o).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),V("p",la,k(t.$t("wizard.verify_domain.notes.notes")),1),V("ul",ra,[V("li",sa,[L(k(t.$t("wizard.verify_domain.notes.not_contain"))+" ",1),m[2]||(m[2]=V("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://",-1)),L(" "+k(t.$t("wizard.verify_domain.notes.or"))+" ",1),m[3]||(m[3]=V("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http",-1)),L(" "+k(t.$t("wizard.verify_domain.notes.in_front")),1)]),V("li",da,[L(k(t.$t("wizard.verify_domain.notes.if_you"))+" ",1),m[4]||(m[4]=V("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080",-1))])]),a(b,{loading:s.value,disabled:s.value,class:"mt-8",onClick:$},{default:c(()=>[L(k(t.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},va={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},fa={__name:"SmtpMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D;let r=M(!1);const s=Y(["none","tls","ssl","starttls"]),{t:l}=R.useI18n(),u=X(),n=z(()=>u.smtpConfig),g=z(()=>r.value?"text":"password");n.value.mail_driver="smtp";const d=z(()=>({smtpConfig:{mail_driver:{required:y.withMessage(l("validation.required"),B)},mail_host:{required:y.withMessage(l("validation.required"),B)},mail_port:{required:y.withMessage(l("validation.required"),B),numeric:y.withMessage(l("validation.numbers_only"),oe)},mail_encryption:{required:y.withMessage(l("validation.required"),B)},from_mail:{required:y.withMessage(l("validation.required"),B),email:y.withMessage(l("validation.email_incorrect"),Q)},from_name:{required:y.withMessage(l("validation.required"),B)}}})),f=x(d,z(()=>u));async function o(){return f.value.$touch(),f.value.$invalid||C("submit-data",u.smtpConfig),!1}function $(){f.value.smtpConfig.mail_driver.$touch(),C("on-change-driver",u.smtpConfig.mail_driver)}return(t,m)=>{const _=w("BaseMultiselect"),q=w("BaseInputGroup"),b=w("BaseInput"),v=w("BaseIcon"),h=w("BaseButton");return S(),P("form",{onSubmit:A(o,["prevent"])},[V("div",ma,[a(q,{label:t.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(f).smtpConfig.mail_driver.$error&&e(f).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(_,{modelValue:n.value.mail_driver,"onUpdate:modelValue":[m[0]||(m[0]=p=>n.value.mail_driver=p),$],options:e(u).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(f).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(q,{label:t.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(f).smtpConfig.mail_host.$error&&e(f).smtpConfig.mail_host.$errors[0].$message,required:""},{default:c(()=>[a(b,{modelValue:n.value.mail_host,"onUpdate:modelValue":m[1]||(m[1]=p=>n.value.mail_host=p),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:m[2]||(m[2]=p=>e(f).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ca,[a(q,{label:t.$t("wizard.mail.username"),"content-loading":i.isFetchingInitialData},{default:c(()=>[a(b,{modelValue:n.value.mail_username,"onUpdate:modelValue":m[3]||(m[3]=p=>n.value.mail_username=p),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),a(q,{label:t.$t("wizard.mail.password"),"content-loading":i.isFetchingInitialData},{default:c(()=>[a(b,{modelValue:n.value.mail_password,"onUpdate:modelValue":m[5]||(m[5]=p=>n.value.mail_password=p),modelModifiers:{trim:!0},type:g.value,"content-loading":i.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:c(()=>[a(v,{name:e(r)?"EyeIcon":"EyeOffIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:m[4]||(m[4]=p=>te(r)?r.value=!e(r):r=!e(r))},null,8,["name"])]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),V("div",ga,[a(q,{label:t.$t("wizard.mail.port"),error:e(f).smtpConfig.mail_port.$error&&e(f).smtpConfig.mail_port.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(b,{modelValue:n.value.mail_port,"onUpdate:modelValue":m[6]||(m[6]=p=>n.value.mail_port=p),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:m[7]||(m[7]=p=>e(f).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(q,{label:t.$t("wizard.mail.encryption"),error:e(f).smtpConfig.mail_encryption.$error&&e(f).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(_,{modelValue:n.value.mail_encryption,"onUpdate:modelValue":m[8]||(m[8]=p=>n.value.mail_encryption=p),modelModifiers:{trim:!0},options:s,"can-deselect":!1,invalid:e(f).smtpConfig.mail_encryption.$error,"content-loading":i.isFetchingInitialData,onInput:m[9]||(m[9]=p=>e(f).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),V("div",va,[a(q,{label:t.$t("wizard.mail.from_mail"),error:e(f).smtpConfig.from_mail.$error&&e(f).smtpConfig.from_mail.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(b,{modelValue:n.value.from_mail,"onUpdate:modelValue":m[10]||(m[10]=p=>n.value.from_mail=p),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:m[11]||(m[11]=p=>e(f).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(q,{label:t.$t("wizard.mail.from_name"),error:e(f).smtpConfig.from_name.$error&&e(f).smtpConfig.from_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:c(()=>[a(b,{modelValue:n.value.from_name,"onUpdate:modelValue":m[12]||(m[12]=p=>n.value.from_name=p),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:m[13]||(m[13]=p=>e(f).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),a(h,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(p=>[i.isSaving?O("",!0):(S(),U(v,{key:0,name:"SaveIcon",class:W(p.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(t.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},pa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},_a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},$a={__name:"MailgunMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D;let r=M(!1);const s=X(),{t:l}=R.useI18n(),u=z(()=>s.mailgunConfig),n=z(()=>r.value?"text":"password");u.value.mail_driver="mailgun";const g=z(()=>({mailgunConfig:{mail_driver:{required:y.withMessage(l("validation.required"),B)},mail_mailgun_domain:{required:y.withMessage(l("validation.required"),B)},mail_mailgun_endpoint:{required:y.withMessage(l("validation.required"),B)},mail_mailgun_secret:{required:y.withMessage(l("validation.required"),B)},from_mail:{required:y.withMessage(l("validation.required"),B),email:Q},from_name:{required:y.withMessage(l("validation.required"),B)}}})),d=x(g,z(()=>s));function f(){return d.value.$touch(),d.value.$invalid||C("submit-data",s.mailgunConfig),!1}function o(){d.value.mailgunConfig.mail_driver.$touch(),C("on-change-driver",s.mailgunConfig.mail_driver)}return($,t)=>{const m=w("BaseMultiselect"),_=w("BaseInputGroup"),q=w("BaseInput"),b=w("BaseIcon"),v=w("BaseButton");return S(),P("form",{onSubmit:A(f,["prevent"])},[V("div",pa,[a(_,{label:$.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(d).mailgunConfig.mail_driver.$error&&e(d).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:u.value.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=h=>u.value.mail_driver=h),o],options:e(s).mail_drivers,"can-deselect":!1,invalid:e(d).mailgunConfig.mail_driver.$error,"content-loading":i.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(d).mailgunConfig.mail_mailgun_domain.$error&&e(d).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:u.value.mail_mailgun_domain,"onUpdate:modelValue":t[1]||(t[1]=h=>u.value.mail_mailgun_domain=h),modelModifiers:{trim:!0},invalid:e(d).mailgunConfig.mail_mailgun_domain.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:t[2]||(t[2]=h=>e(d).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",_a,[a(_,{label:$.$t("wizard.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(d).mailgunConfig.mail_mailgun_secret.$error&&e(d).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:u.value.mail_mailgun_secret,"onUpdate:modelValue":t[4]||(t[4]=h=>u.value.mail_mailgun_secret=h),modelModifiers:{trim:!0},invalid:e(d).mailgunConfig.mail_mailgun_secret.$error,type:n.value,"content-loading":i.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:t[5]||(t[5]=h=>e(d).mailgunConfig.mail_mailgun_secret.$touch())},{right:c(()=>[a(b,{name:e(r)?"EyeIcon":"EyeOffIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:t[3]||(t[3]=h=>te(r)?r.value=!e(r):r=!e(r))},null,8,["name"])]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(d).mailgunConfig.mail_mailgun_endpoint.$error&&e(d).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:u.value.mail_mailgun_endpoint,"onUpdate:modelValue":t[6]||(t[6]=h=>u.value.mail_mailgun_endpoint=h),modelModifiers:{trim:!0},invalid:e(d).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:t[7]||(t[7]=h=>e(d).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ba,[a(_,{label:$.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(d).mailgunConfig.from_mail.$error&&e(d).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:u.value.from_mail,"onUpdate:modelValue":t[8]||(t[8]=h=>u.value.from_mail=h),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(d).mailgunConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,onInput:t[9]||(t[9]=h=>e(d).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(d).mailgunConfig.from_name.$error&&e(d).mailgunConfig.from_name.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:u.value.from_name,"onUpdate:modelValue":t[10]||(t[10]=h=>u.value.from_name=h),modelModifiers:{trim:!0},invalid:e(d).mailgunConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:t[11]||(t[11]=h=>e(d).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(v,{loading:$.loading,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(h=>[i.isSaving?O("",!0):(S(),U(b,{key:0,name:"SaveIcon",class:W(h.class)},null,8,["class"]))]),default:c(()=>[L(" "+k($.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},wa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ia={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Va={__name:"SesMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D,{t:r}=R.useI18n(),s=Y(["tls","ssl","starttls"]);let l=M(!1);const u=X(),n=z(()=>u.sesConfig);n.value.mail_driver="ses";const g=z(()=>({sesConfig:{mail_driver:{required:y.withMessage(r("validation.required"),B)},mail_host:{required:y.withMessage(r("validation.required"),B)},mail_port:{required:y.withMessage(r("validation.required"),B),numeric:oe},mail_ses_key:{required:y.withMessage(r("validation.required"),B)},mail_ses_secret:{required:y.withMessage(r("validation.required"),B)},mail_encryption:{required:y.withMessage(r("validation.required"),B)},from_mail:{required:y.withMessage(r("validation.required"),B),email:y.withMessage(r("validation.email_incorrect"),Q)},from_name:{required:y.withMessage(r("validation.required"),B)}}})),d=x(g,z(()=>u));async function f(){return d.value.$touch(),d.value.$invalid||C("submit-data",u.sesConfig),!1}function o(){d.value.sesConfig.mail_driver.$touch(),C("on-change-driver",u.sesConfig.mail_driver)}return($,t)=>{const m=w("BaseMultiselect"),_=w("BaseInputGroup"),q=w("BaseInput"),b=w("BaseIcon"),v=w("BaseButton");return S(),P("form",{onSubmit:A(f,["prevent"])},[V("div",wa,[a(_,{label:$.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.mail_driver.$error&&e(d).sesConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:n.value.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=h=>n.value.mail_driver=h),o],options:e(u).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(d).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.mail_host.$error&&e(d).sesConfig.mail_host.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:n.value.mail_host,"onUpdate:modelValue":t[1]||(t[1]=h=>n.value.mail_host=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:t[2]||(t[2]=h=>e(d).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ha,[a(_,{label:$.$t("wizard.mail.port"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.mail_port.$error&&e(d).sesConfig.mail_port.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:n.value.mail_port,"onUpdate:modelValue":t[3]||(t[3]=h=>n.value.mail_port=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:t[4]||(t[4]=h=>e(d).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.mail_encryption.$error&&e(d).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:n.value.mail_encryption,"onUpdate:modelValue":t[5]||(t[5]=h=>n.value.mail_encryption=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.mail_encryption.$error,options:s,"content-loading":i.isFetchingInitialData,onInput:t[6]||(t[6]=h=>e(d).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",ya,[a(_,{label:$.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.from_mail.$error&&e(d).sesConfig.from_mail.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:n.value.from_mail,"onUpdate:modelValue":t[7]||(t[7]=h=>n.value.from_mail=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:t[8]||(t[8]=h=>e(d).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.from_name.$error&&e(d).sesConfig.from_name.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:n.value.from_name,"onUpdate:modelValue":t[9]||(t[9]=h=>n.value.from_name=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:t[10]||(t[10]=h=>e(d).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",Ia,[a(_,{label:$.$t("wizard.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.mail_ses_key.$error&&e(d).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:n.value.mail_ses_key,"onUpdate:modelValue":t[11]||(t[11]=h=>n.value.mail_ses_key=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.mail_ses_key.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:t[12]||(t[12]=h=>e(d).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(_,{label:$.$t("wizard.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(d).sesConfig.mail_ses_secret.$error&&e(d).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:c(()=>[a(q,{modelValue:n.value.mail_ses_secret,"onUpdate:modelValue":t[14]||(t[14]=h=>n.value.mail_ses_secret=h),modelModifiers:{trim:!0},invalid:e(d).sesConfig.mail_ses_secret.$error,type:$.getInputType,"content-loading":i.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:t[15]||(t[15]=h=>e(d).sesConfig.mail_ses_secret.$touch())},{right:c(()=>[a(b,{name:e(l)?"EyeIcon":"EyeOffIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:t[13]||(t[13]=h=>te(l)?l.value=!e(l):l=!e(l))},null,8,["name"])]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(v,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(h=>[i.isSaving?O("",!0):(S(),U(b,{key:0,name:"SaveIcon",class:W(h.class)},null,8,["class"]))]),default:c(()=>[L(" "+k($.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},qa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ve={__name:"BasicMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:D}){const C=D,{t:r}=R.useI18n(),s=X(),l=z(()=>s.basicMailConfig);z(()=>s.mail_drivers),l.value.mail_driver="mail";const u=z(()=>({basicMailConfig:{mail_driver:{required:y.withMessage(r("validation.required"),B)},from_mail:{required:y.withMessage(r("validation.required"),B),email:y.withMessage(r("validation.email_incorrect"),Q)},from_name:{required:y.withMessage(r("validation.required"),B)}}})),n=x(u,z(()=>s));function g(){return n.value.$touch(),n.value.$invalid||C("submit-data",s.basicMailConfig),!1}function d(){var f;n.value.basicMailConfig.mail_driver.$touch(),C("on-change-driver",(f=s==null?void 0:s.basicMailConfig)==null?void 0:f.mail_driver)}return(f,o)=>{const $=w("BaseMultiselect"),t=w("BaseInputGroup"),m=w("BaseInput"),_=w("BaseIcon"),q=w("BaseButton");return S(),P("form",{onSubmit:A(g,["prevent"])},[V("div",qa,[a(t,{label:f.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(n).basicMailConfig.mail_driver.$error&&e(n).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:c(()=>[a($,{modelValue:l.value.mail_driver,"onUpdate:modelValue":[o[0]||(o[0]=b=>l.value.mail_driver=b),d],invalid:e(n).basicMailConfig.mail_driver.$error,options:e(s).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),V("div",Ba,[a(t,{label:f.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(n).basicMailConfig.from_name.$error&&e(n).basicMailConfig.from_name.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:l.value.from_name,"onUpdate:modelValue":o[1]||(o[1]=b=>l.value.from_name=b),modelModifiers:{trim:!0},invalid:e(n).basicMailConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:o[2]||(o[2]=b=>e(n).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(t,{label:f.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(n).basicMailConfig.from_mail.$error&&e(n).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:c(()=>[a(m,{modelValue:l.value.from_mail,"onUpdate:modelValue":o[3]||(o[3]=b=>l.value.from_mail=b),modelModifiers:{trim:!0},invalid:e(n).basicMailConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",onInput:o[4]||(o[4]=b=>e(n).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(q,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:c(b=>[i.isSaving?O("",!0):(S(),U(_,{key:0,name:"SaveIcon",class:W(b.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(f.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},Ca={components:{Smtp:fa,Mailgun:$a,Ses:Va,sendmail:ve,Mail:ve},emits:["next"],setup(i,{emit:D}){const C=M(!1),r=M(!1),s=X();s.mail_driver="mail",u();function l(g){s.mail_driver=g}async function u(){r.value=!0,await s.fetchMailDrivers(),r.value=!1}async function n(g){C.value=!0;let d=await s.updateMailConfig(g);C.value=!1,d.data.success&&await D("next",5)}return{mailDriverStore:s,isSaving:C,isFetchingInitialData:r,changeDriver:l,next:n}}};function Da(i,D,C,r,s,l){const u=w("BaseWizardStep");return S(),U(u,{title:i.$t("wizard.mail.mail_config"),description:i.$t("wizard.mail.mail_config_desc")},{default:c(()=>[V("form",{action:"",onSubmit:D[1]||(D[1]=A((...n)=>r.next&&r.next(...n),["prevent"]))},[(S(),U(ce(r.mailDriverStore.mail_driver),{"config-data":r.mailDriverStore.mailConfigData,"is-saving":r.isSaving,"is-fetching-initial-data":r.isFetchingInitialData,onOnChangeDriver:D[0]||(D[0]=n=>r.changeDriver(n)),onSubmitData:r.next},null,40,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}const Sa=ue(Ca,[["render",Da]]),Fa={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},za={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ka={__name:"Step6AccountSettings",emits:["next"],setup(i,{emit:D}){const C=D;let r=M(!1);const s=M(!1),l=M(!1);let u=M(""),n=M(null);const g=pe(),d=ee(),{t:f}=R.useI18n(),o=z(()=>g.userForm),$=z(()=>({userForm:{name:{required:y.withMessage(f("validation.required"),B)},email:{required:y.withMessage(f("validation.required"),B),email:y.withMessage(f("validation.email_incorrect"),Q)},password:{required:y.withMessage(f("validation.required"),B),minLength:y.withMessage(f("validation.password_min_length",{count:8}),ye(8))},confirm_password:{required:y.withMessage(f("validation.required"),he(g.userForm.password)),sameAsPassword:y.withMessage(f("validation.password_incorrect"),we(g.userForm.password))}}})),t=x($,z(()=>g));function m(b,v){n.value=v}function _(){n.value=null}async function q(){if(t.value.userForm.$touch(),t.value.userForm.$invalid)return!0;r.value=!0;let b=await g.updateCurrentUser(o.value);if(r.value=!1,b.data.data){if(n.value){let h=new FormData;h.append("admin_avatar",n.value),await g.uploadAvatar(h)}const v=b.data.data.companies[0];await d.setSelectedCompany(v),C("next",6)}}return(b,v)=>{const h=w("BaseFileUploader"),p=w("BaseInputGroup"),I=w("BaseInput"),E=w("BaseIcon"),T=w("BaseButton"),H=w("BaseWizardStep");return S(),U(H,{title:b.$t("wizard.account_info"),description:b.$t("wizard.account_info_desc")},{default:c(()=>[V("form",{action:"",onSubmit:A(q,["prevent"])},[V("div",Fa,[a(p,{label:b.$t("settings.account_settings.profile_picture")},{default:c(()=>[a(h,{avatar:!0,"preview-image":e(u),onChange:m,onRemove:_},null,8,["preview-image"])]),_:1},8,["label"])]),V("div",Ma,[a(p,{label:b.$t("wizard.name"),error:e(t).userForm.name.$error&&e(t).userForm.name.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.name,"onUpdate:modelValue":v[0]||(v[0]=N=>o.value.name=N),modelModifiers:{trim:!0},invalid:e(t).userForm.name.$error,type:"text",name:"name",onInput:v[1]||(v[1]=N=>e(t).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(p,{label:b.$t("wizard.email"),error:e(t).userForm.email.$error&&e(t).userForm.email.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.email,"onUpdate:modelValue":v[2]||(v[2]=N=>o.value.email=N),modelModifiers:{trim:!0},invalid:e(t).userForm.email.$error,type:"text",name:"email",onInput:v[3]||(v[3]=N=>e(t).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),V("div",za,[a(p,{label:b.$t("wizard.password"),error:e(t).userForm.password.$error&&e(t).userForm.password.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.password,"onUpdate:modelValue":v[5]||(v[5]=N=>o.value.password=N),modelModifiers:{trim:!0},invalid:e(t).userForm.password.$error,type:s.value?"text":"password",name:"password",onInput:v[6]||(v[6]=N=>e(t).userForm.password.$touch())},{right:c(()=>[a(E,{name:s.value?"EyeIcon":"EyeOffIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:v[4]||(v[4]=N=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),a(p,{label:b.$t("wizard.confirm_password"),error:e(t).userForm.confirm_password.$error&&e(t).userForm.confirm_password.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:o.value.confirm_password,"onUpdate:modelValue":v[8]||(v[8]=N=>o.value.confirm_password=N),modelModifiers:{trim:!0},invalid:e(t).userForm.confirm_password.$error,type:l.value?"text":"password",name:"confirm_password",onInput:v[9]||(v[9]=N=>e(t).userForm.confirm_password.$touch())},{right:c(()=>[a(E,{name:l.value?"EyeIcon":"EyeOffIcon",class:"mr-1 text-gray-500 cursor-pointer",onClick:v[7]||(v[7]=N=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),a(T,{loading:e(r),disabled:e(r),class:"mt-4"},{left:c(N=>[e(r)?O("",!0):(S(),U(E,{key:0,name:"SaveIcon",class:W(N.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(b.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Ua={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Pa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},La={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Na={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ea={__name:"Step7CompanyInfo",emits:["next"],setup(i,{emit:D}){const C=D;let r=M(!1),s=M(!1);const{t:l}=R.useI18n();let u=M(null),n=M(null),g=M(null);const d=Y({name:null,tax_id:null,vat_id:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),f=ee(),o=_e();Z(async()=>{var b;r.value=!0,await o.fetchCountries(),r.value=!1,d.address.country_id=(b=o.countries.find(v=>v.code=="US"))==null?void 0:b.id});const $={companyForm:{name:{required:y.withMessage(l("validation.required"),B)},address:{country_id:{required:y.withMessage(l("validation.required"),B)},address_street_1:{maxLength:y.withMessage(l("validation.address_maxlength",{count:255}),ge(255))},address_street_2:{maxLength:y.withMessage(l("validation.address_maxlength",{count:255}),ge(255))}}}},t=x($,{companyForm:d});function m(b,v,h,p){g.value=p.name,n.value=v}function _(){n.value=null}async function q(){if(t.value.companyForm.$touch(),t.value.$invalid)return!0;if(s.value=!0,f.updateCompany(d)){if(n.value){let v=new FormData;v.append("company_logo",JSON.stringify({name:g.value,data:n.value})),await f.updateCompanyLogo(v)}s.value=!1,C("next",7)}}return(b,v)=>{const h=w("BaseFileUploader"),p=w("BaseInputGroup"),I=w("BaseInput"),E=w("BaseMultiselect"),T=w("BaseTextarea"),H=w("BaseIcon"),N=w("BaseButton"),le=w("BaseWizardStep");return S(),U(le,{title:b.$t("wizard.company_info"),description:b.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:c(()=>[V("form",{action:"",onSubmit:A(q,["prevent"])},[V("div",Ua,[a(p,{label:b.$t("settings.company_info.company_logo")},{default:c(()=>[a(h,{base64:"","preview-image":e(u),onChange:m,onRemove:_},null,8,["preview-image"])]),_:1},8,["label"])]),V("div",Pa,[a(p,{label:b.$t("wizard.company_name"),error:e(t).companyForm.name.$error&&e(t).companyForm.name.$errors[0].$message,required:""},{default:c(()=>[a(I,{modelValue:d.name,"onUpdate:modelValue":v[0]||(v[0]=F=>d.name=F),modelModifiers:{trim:!0},invalid:e(t).companyForm.name.$error,type:"text",name:"name",onInput:v[1]||(v[1]=F=>e(t).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(p,{label:b.$t("wizard.country"),error:e(t).companyForm.address.country_id.$error&&e(t).companyForm.address.country_id.$errors[0].$message,"content-loading":e(r),required:""},{default:c(()=>[a(E,{modelValue:d.address.country_id,"onUpdate:modelValue":v[2]||(v[2]=F=>d.address.country_id=F),label:"name",invalid:e(t).companyForm.address.country_id.$error,options:e(o).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(r),placeholder:b.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),V("div",La,[a(p,{label:b.$t("wizard.state")},{default:c(()=>[a(I,{modelValue:d.address.state,"onUpdate:modelValue":v[3]||(v[3]=F=>d.address.state=F),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:b.$t("wizard.city")},{default:c(()=>[a(I,{modelValue:d.address.city,"onUpdate:modelValue":v[4]||(v[4]=F=>d.address.city=F),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),V("div",Na,[V("div",null,[a(p,{label:b.$t("wizard.address"),error:e(t).companyForm.address.address_street_1.$error&&e(t).companyForm.address.address_street_1.$errors[0].$message},{default:c(()=>[a(T,{modelValue:d.address.address_street_1,"onUpdate:modelValue":v[5]||(v[5]=F=>d.address.address_street_1=F),modelModifiers:{trim:!0},invalid:e(t).companyForm.address.address_street_1.$error,placeholder:b.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:v[6]||(v[6]=F=>e(t).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),a(p,{error:e(t).companyForm.address.address_street_2.$error&&e(t).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:c(()=>[a(T,{modelValue:d.address.address_street_2,"onUpdate:modelValue":v[7]||(v[7]=F=>d.address.address_street_2=F),invalid:e(t).companyForm.address.address_street_2.$error,placeholder:b.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:v[8]||(v[8]=F=>e(t).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),V("div",null,[a(p,{label:b.$t("wizard.zip_code")},{default:c(()=>[a(I,{modelValue:d.address.zip,"onUpdate:modelValue":v[9]||(v[9]=F=>d.address.zip=F),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:b.$t("wizard.phone"),class:"mt-4"},{default:c(()=>[a(I,{modelValue:d.address.phone,"onUpdate:modelValue":v[10]||(v[10]=F=>d.address.phone=F),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])]),a(p,{label:b.$t("settings.company_info.tax_id")},{default:c(()=>[a(I,{modelValue:d.tax_id,"onUpdate:modelValue":v[11]||(v[11]=F=>d.tax_id=F),modelModifiers:{trim:!0},type:"text",name:"tax_id"},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:b.$t("settings.company_info.vat_id")},{default:c(()=>[a(I,{modelValue:d.vat_id,"onUpdate:modelValue":v[12]||(v[12]=F=>d.vat_id=F),modelModifiers:{trim:!0},type:"text",name:"vat_id"},null,8,["modelValue"])]),_:1},8,["label"])]),a(N,{loading:e(s),disabled:e(s),class:"mt-4"},{left:c(F=>[e(s)?O("",!0):(S(),U(H,{key:0,name:"SaveIcon",class:W(F.class)},null,8,["class"]))]),default:c(()=>[L(" "+k(b.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Wa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ra={__name:"Step8CompanyPreferences",emits:["next"],setup(i,{emit:D}){const C=D,r=M(!1);let s=M(!1),l=Y({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:u,t:n}=R.useI18n(),g=be();s.value=!0;const d=z(()=>o.fiscalYears.map(p=>Object.assign({},p,{key:n(p.key)})));Y([{title:u("settings.customization.invoices.allow"),value:"allow"},{title:u("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:u("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:u("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const f=fe(),o=_e(),$=ee(),t=pe(),m=me();let _={key:"fiscal_years"},q={key:"languages"};s.value=!0,Promise.all([o.fetchCurrencies(),o.fetchDateFormats(),o.fetchTimeZones(),o.fetchCountries(),o.fetchConfig(_),o.fetchConfig(q)]).then(([p])=>{s.value=!1});const b=z(()=>({currentPreferences:{currency:{required:y.withMessage(n("validation.required"),B)},language:{required:y.withMessage(n("validation.required"),B)},carbon_date_format:{required:y.withMessage(n("validation.required"),B)},time_zone:{required:y.withMessage(n("validation.required"),B)},fiscal_year:{required:y.withMessage(n("validation.required"),B)}}})),v=x(b,{currentPreferences:l});async function h(){if(v.value.currentPreferences.$touch(),v.value.$invalid)return!0;f.openDialog({title:n("general.do_you_wish_to_continue"),message:n("wizard.currency_set_alert"),yesLabel:n("general.ok"),noLabel:n("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async p=>{if(p){let I={settings:{...l}};r.value=!0,delete I.settings.discount_per_item;let E=await $.updateCompanySettings({data:I});if(E.data){r.value=!1;let T={settings:{language:l.language}};(await t.updateUserSettings(T)).data&&(C("next","COMPLETED"),m.showNotification({type:"success",message:"Login Successful"}),g.push("/admin/dashboard")),Ie.set("auth.token",E.data.token)}return!0}return r.value=!1,!0})}return(p,I)=>{const E=w("BaseMultiselect"),T=w("BaseInputGroup"),H=w("BaseIcon"),N=w("BaseButton"),le=w("BaseWizardStep");return S(),U(le,{title:p.$t("wizard.preferences"),description:p.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:c(()=>[V("form",{action:"",onSubmit:A(h,["prevent"])},[V("div",null,[V("div",Ga,[a(T,{label:p.$t("wizard.currency"),error:e(v).currentPreferences.currency.$error&&e(v).currentPreferences.currency.$errors[0].$message,"content-loading":e(s),required:""},{default:c(()=>[a(E,{modelValue:e(l).currency,"onUpdate:modelValue":I[0]||(I[0]=F=>e(l).currency=F),"content-loading":e(s),options:e(o).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:p.$t("settings.currencies.select_currency"),invalid:e(v).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(T,{label:p.$t("settings.preferences.default_language"),error:e(v).currentPreferences.language.$error&&e(v).currentPreferences.language.$errors[0].$message,"content-loading":e(s),required:""},{default:c(()=>[a(E,{modelValue:e(l).language,"onUpdate:modelValue":I[1]||(I[1]=F=>e(l).language=F),"content-loading":e(s),options:e(o).languages,label:"name","value-prop":"code",placeholder:p.$t("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(v).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),V("div",Oa,[a(T,{label:p.$t("wizard.date_format"),error:e(v).currentPreferences.carbon_date_format.$error&&e(v).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(s),required:""},{default:c(()=>[a(E,{modelValue:e(l).carbon_date_format,"onUpdate:modelValue":I[2]||(I[2]=F=>e(l).carbon_date_format=F),"content-loading":e(s),options:e(o).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:p.$t("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(v).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(T,{label:p.$t("wizard.time_zone"),error:e(v).currentPreferences.time_zone.$error&&e(v).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(s),required:""},{default:c(()=>[a(E,{modelValue:e(l).time_zone,"onUpdate:modelValue":I[3]||(I[3]=F=>e(l).time_zone=F),"content-loading":e(s),options:e(o).timeZones,label:"key","value-prop":"value",placeholder:p.$t("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(v).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),V("div",Wa,[a(T,{label:p.$t("wizard.fiscal_year"),error:e(v).currentPreferences.fiscal_year.$error&&e(v).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(s),required:""},{default:c(()=>[a(E,{modelValue:e(l).fiscal_year,"onUpdate:modelValue":I[4]||(I[4]=F=>e(l).fiscal_year=F),"content-loading":e(s),options:d.value,label:"key","value-prop":"value",placeholder:p.$t("settings.preferences.select_financial_year"),invalid:e(v).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),a(N,{loading:r.value,disabled:r.value,"content-loading":e(s),class:"mt-4"},{left:c(F=>[a(H,{name:"SaveIcon",class:W(F.class)},null,8,["class"])]),default:c(()=>[L(" "+k(p.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],32)]),_:1},8,["title","description"])}}},Ta={components:{step_0:Be,step_1:Ge,step_2:Ae,step_3:ia,step_4:ua,step_5:Sa,step_6:ka,step_7:Ea,step_8:Ra},setup(){let i=M("step_0"),D=M(0);const C=be(),r=J(),{global:s}=window.i18n;l();async function l(){let f=await r.fetchInstallationStep();if(f.data.profile_complete==="COMPLETED"){C.push("/admin/dashboard");return}typeof f.data.profile_language=="string"&&(s.locale.value=f.data.profile_language);let o=parseInt(f.data.profile_complete);o&&(D.value=o+1,i.value=`step_${o+1}`)}async function u(f){var $,t;let o={profile_complete:f};try{return await r.addInstallationStep(o),!0}catch(m){return((t=($=m==null?void 0:m.response)==null?void 0:$.data)==null?void 0:t.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function n(f){if(f&&!await u(f))return!1;D.value++,D.value<=9&&(i.value="step_"+D.value)}function g(f){}function d(){return new URL("/build/assets/logo-DEKJIA3T.png",import.meta.url)}return{stepComponent:i,currentStepNumber:D,onStepChange:n,saveStepProgress:u,onNavClick:g,getTickImage:d}}},ja={class:"flex flex-col items-center justify-between w-full pt-10"},xa=["src"];function Aa(i,D,C,r,s,l){const u=w("BaseWizard");return S(),P("div",ja,[V("img",{id:"logo-invoiceshelf",src:r.getTickImage(),alt:"InvoiceShelf Logo",class:"h-12 mb-5 md:mb-10"},null,8,xa),a(u,{steps:9,"current-step":r.currentStepNumber,onClick:r.onNavClick},{default:c(()=>[(S(),U(ce(r.stepComponent),{onNext:r.onStepChange},null,40,["onNext"]))]),_:1},8,["current-step","onClick"])])}const Ka=ue(Ta,[["render",Aa]]);export{Ka as default};
