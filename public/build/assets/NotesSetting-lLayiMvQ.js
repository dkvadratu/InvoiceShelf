import{a9 as C,u as k,v as x,N as $,O as M,G as A,a7 as T,r as l,K as p,o as m,w as e,L as D,l as d,V as I,a as r,q as N,t as h,e as O,j,c as P,Q as G,M as L,I as V}from"./main-DlOnIu1m.js";import{u as E,_ as F}from"./NoteModal-uSgdqvz3.js";import"./payment-CkHnINqs.js";const H={__name:"NoteIndexDropdown",props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(g){const a=g,B=C(),_=k(),{t:o}=x.useI18n(),s=E(),v=$(),y=M(),w=A();T("utils");function b(t){s.fetchNote(t),w.openModal({title:o("settings.customization.notes.edit_note"),componentName:"NoteModal",size:"md",refreshData:a.loadData})}function z(t){B.openDialog({title:o("general.are_you_sure"),message:o("settings.customization.notes.note_confirm_delete"),yesLabel:o("general.yes"),noLabel:o("general.no"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async()=>{(await s.deleteNote(t)).data.success?_.showNotification({type:"success",message:o("settings.customization.notes.deleted_message")}):_.showNotification({type:"error",message:o("settings.customization.notes.already_in_use")}),a.loadData&&a.loadData()})}return(t,c)=>{const n=l("BaseIcon"),f=l("BaseButton"),i=l("BaseDropdownItem"),S=l("BaseDropdown");return m(),p(S,null,{activator:e(()=>[d(v).name==="notes.view"?(m(),p(f,{key:0,variant:"primary"},{default:e(()=>[r(n,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(m(),p(n,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:e(()=>[d(y).hasAbilities(d(I).MANAGE_NOTE)?(m(),p(i,{key:0,onClick:c[0]||(c[0]=u=>b(g.row.id))},{default:e(()=>[r(n,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),N(" "+h(t.$t("general.edit")),1)]),_:1})):D("",!0),d(y).hasAbilities(d(I).MANAGE_NOTE)?(m(),p(i,{key:1,onClick:c[1]||(c[1]=u=>z(g.row.id))},{default:e(()=>[r(n,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),N(" "+h(t.$t("general.delete")),1)]),_:1})):D("",!0)]),_:1})}}},R={__name:"NotesSetting",setup(g){const{t:a}=x.useI18n(),B=A();C();const _=E();k();const o=M(),s=O(""),v=j(()=>[{key:"name",label:a("settings.customization.notes.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"type",label:a("settings.customization.notes.type"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function y({page:t,filter:c,sort:n}){let f=V({orderByField:n.fieldName||"created_at",orderBy:n.order||"desc",page:t}),i=await _.fetchNotes(f);return{data:i.data.data,pagination:{totalPages:i.data.meta.last_page,currentPage:t,totalCount:i.data.meta.total,limit:5}}}async function w(){await B.openModal({title:a("settings.customization.notes.add_note"),componentName:"NoteModal",size:"md",refreshData:s.value&&s.value.refresh})}async function b(){s.value&&s.value.refresh()}function z(t){switch(t){case"Estimate":return a("settings.customization.notes.types.estimate");case"Invoice":return a("settings.customization.notes.types.invoice");case"Payment":return a("settings.customization.notes.types.payment");default:return t}}return(t,c)=>{const n=l("BaseIcon"),f=l("BaseButton"),i=l("BaseTable"),S=l("BaseSettingCard");return m(),P(G,null,[r(F),r(S,{title:t.$t("settings.customization.notes.title"),description:t.$t("settings.customization.notes.description")},{action:e(()=>[d(o).hasAbilities(d(I).MANAGE_NOTE)?(m(),p(f,{key:0,variant:"primary-outline",onClick:w},{left:e(u=>[r(n,{class:L(u.class),name:"PlusIcon"},null,8,["class"])]),default:e(()=>[N(" "+h(t.$t("settings.customization.notes.add_note")),1)]),_:1})):D("",!0)]),default:e(()=>[r(i,{ref_key:"table",ref:s,data:y,columns:v.value,class:"mt-14"},{"cell-actions":e(({row:u})=>[r(H,{row:u.data,table:s.value,"load-data":b},null,8,["row","table"])]),"cell-type":e(({row:u})=>[N(h(z(u.data.type)),1)]),_:1},8,["columns"])]),_:1},8,["title","description"])],64)}}};export{R as default};
