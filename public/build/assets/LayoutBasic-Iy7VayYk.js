import{x as D,y as xe,z as we,j as G,A as ee,B as j,C as $e,D as ke,E as Ce,l as e,n as H,F as J,G as K,H as W,v as Q,e as I,I as Se,f as q,g as Y,J as Be,i as ie,r as x,K as B,o as r,w as c,b as i,m as ae,a as t,c as f,q as U,t as g,L as E,M as O,N as Z,O as ne,P as ce,Q as L,R as F,T as ue,S as Ie,U as Ee,d as Me,_ as de,V as N,Y as Ae,W as te,X as Ue,Z as Ve,u as Re,$ as Le,k as Te}from"./main-CAtQQnL-.js";import{u as me}from"./exchange-rate-B9vW14B1.js";import{u as Fe}from"./users-DPl-f4xZ.js";import{N as Ne}from"./NotificationRoot-DeP6y93I.js";import{V as Oe}from"./index-Dx1v0HzL.js";const pe=we?window:void 0;function z($){var d;const n=j($);return(d=n==null?void 0:n.$el)!=null?d:n}function P(...$){const d=[],n=()=>{d.forEach(h=>h()),d.length=0},l=(h,a,o,b)=>(h.addEventListener(a,o,b),()=>h.removeEventListener(a,o,b)),y=G(()=>{const h=ee(j($[0])).filter(a=>a!=null);return h.every(a=>typeof a!="string")?h:void 0}),_=$e(()=>{var h,a;return[(a=(h=y.value)==null?void 0:h.map(o=>z(o)))!=null?a:[pe].filter(o=>o!=null),ee(j(y.value?$[1]:$[0])),ee(e(y.value?$[2]:$[1])),j(y.value?$[3]:$[2])]},([h,a,o,b])=>{if(n(),!(h!=null&&h.length)||!(a!=null&&a.length)||!(o!=null&&o.length))return;const m=Ce(b)?{...b}:b;d.push(...h.flatMap(C=>a.flatMap(w=>o.map(s=>l(C,w,s,m)))))},{flush:"post"}),v=()=>{_(),n()};return ke(n),v}let le=!1;function _e($,d,n={}){const{window:l=pe,ignore:y=[],capture:_=!0,detectIframe:v=!1,controls:h=!1}=n;if(!l)return h?{stop:D,cancel:D,trigger:D}:D;if(xe&&!le){le=!0;const u={passive:!0};Array.from(l.document.body.children).forEach(p=>P(p,"click",D,u)),P(l.document.documentElement,"click",D,u)}let a=!0;const o=u=>j(y).some(p=>{if(typeof p=="string")return Array.from(l.document.querySelectorAll(p)).some(S=>S===u.target||u.composedPath().includes(S));{const S=z(p);return S&&(u.target===S||u.composedPath().includes(S))}});function b(u){const p=j(u);return p&&p.$.subTree.shapeFlag===16}function m(u,p){const S=j(u),V=S.$.subTree&&S.$.subTree.children;return V==null||!Array.isArray(V)?!1:V.some(R=>R.el===p.target||p.composedPath().includes(R.el))}const C=u=>{const p=z($);if(u.target!=null&&!(!(p instanceof Element)&&b($)&&m($,u))&&!(!p||p===u.target||u.composedPath().includes(p))){if("detail"in u&&u.detail===0&&(a=!o(u)),!a){a=!0;return}d(u)}};let w=!1;const s=[P(l,"click",u=>{w||(w=!0,setTimeout(()=>{w=!1},0),C(u))},{passive:!0,capture:_}),P(l,"pointerdown",u=>{const p=z($);a=!o(u)&&!!(p&&!u.composedPath().includes(p))},{passive:!0}),v&&P(l,"blur",u=>{setTimeout(()=>{var p;const S=z($);((p=l.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(S!=null&&S.contains(l.document.activeElement))&&d(u)},0)},{passive:!0})].filter(Boolean),k=()=>s.forEach(u=>u());return h?{stop:k,cancel:()=>{a=!1},trigger:u=>{a=!0,C(u),a=!1}}:k}const je={class:"flex justify-between w-full"},De={class:"p-4 mb-16 sm:p-6 space-y-4"},qe={key:1,class:"flex flex-col items-center"},Ge={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},Pe={__name:"CompanyModal",setup($){const d=H(),n=J(),l=K(),y=W(),{t:_}=Q.useI18n();let v=I(!1),h=I(null),a=I(!1),o=I(null),b=I(null);const m=Se({name:null,currency:"",address:{country_id:null}}),C=G(()=>l.active&&l.componentName==="CompanyModal"),w={newCompanyForm:{name:{required:q.withMessage(_("validation.required"),Y),minLength:q.withMessage(_("validation.name_min_length",{count:3}),Be(3))},address:{country_id:{required:q.withMessage(_("validation.required"),Y)}},currency:{required:q.withMessage(_("validation.required"),Y)}}},s=ie(w,{newCompanyForm:m});async function k(){a.value=!0,await y.fetchCurrencies(),await y.fetchCountries(),m.currency=n.selectedCompanyCurrency.id,m.address.country_id=n.selectedCompany.address.country_id,a.value=!1}function u(M,A){b.value=M,o.value=A}function p(){b.value=null,o.value=null}async function S(){if(s.value.newCompanyForm.$touch(),s.value.$invalid)return!0;v.value=!0;try{const M=await n.addNewCompany(m);if(M.data.data){if(await n.setSelectedCompany(M.data.data),o&&o.value){let A=new FormData;A.append("company_logo",JSON.stringify({name:b.value,data:o.value})),await n.updateCompanyLogo(A),d.push("/admin/dashboard")}await y.setIsAppLoaded(!1),await y.bootstrap(),R()}v.value=!1}catch{v.value=!1}}function V(){m.name="",m.currency="",m.address.country_id="",s.value.$reset()}function R(){l.closeModal(),setTimeout(()=>{V(),s.value.$reset()},300)}return(M,A)=>{const oe=x("BaseIcon"),fe=x("BaseContentPlaceholdersBox"),he=x("BaseContentPlaceholders"),ye=x("BaseFileUploader"),X=x("BaseInputGroup"),ge=x("BaseInput"),se=x("BaseMultiselect"),ve=x("BaseInputGrid"),re=x("BaseButton"),be=x("BaseModal");return r(),B(be,{show:C.value,onClose:R,onOpen:k},{header:c(()=>[i("div",je,[U(g(e(l).title)+" ",1),t(oe,{name:"XMarkIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:R})])]),default:c(()=>[i("form",{action:"",onSubmit:ae(S,["prevent"])},[i("div",De,[t(ve,{layout:"one-column"},{default:c(()=>[t(X,{"content-loading":e(a),label:M.$t("settings.company_info.company_logo")},{default:c(()=>[e(a)?(r(),B(he,{key:0},{default:c(()=>[t(fe,{rounded:!0,class:"w-full h-24"})]),_:1})):(r(),f("div",qe,[t(ye,{"preview-image":e(h),base64:"",onRemove:p,onChange:u},null,8,["preview-image"])]))]),_:1},8,["content-loading","label"]),t(X,{label:M.$t("settings.company_info.company_name"),error:e(s).newCompanyForm.name.$error&&e(s).newCompanyForm.name.$errors[0].$message,"content-loading":e(a),required:""},{default:c(()=>[t(ge,{modelValue:m.name,"onUpdate:modelValue":A[0]||(A[0]=T=>m.name=T),invalid:e(s).newCompanyForm.name.$error,"content-loading":e(a),onInput:A[1]||(A[1]=T=>e(s).newCompanyForm.name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(X,{"content-loading":e(a),label:M.$t("settings.company_info.country"),error:e(s).newCompanyForm.address.country_id.$error&&e(s).newCompanyForm.address.country_id.$errors[0].$message,required:""},{default:c(()=>[t(se,{modelValue:m.address.country_id,"onUpdate:modelValue":A[2]||(A[2]=T=>m.address.country_id=T),"content-loading":e(a),label:"name",invalid:e(s).newCompanyForm.address.country_id.$error,options:e(y).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["content-loading","label","error"]),t(X,{label:M.$t("wizard.currency"),error:e(s).newCompanyForm.currency.$error&&e(s).newCompanyForm.currency.$errors[0].$message,"content-loading":e(a),"help-text":M.$t("wizard.currency_set_alert"),required:""},{default:c(()=>[t(se,{modelValue:m.currency,"onUpdate:modelValue":A[3]||(A[3]=T=>m.currency=T),"content-loading":e(a),options:e(y).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:M.$t("settings.currencies.select_currency"),invalid:e(s).newCompanyForm.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading","help-text"])]),_:1})]),i("div",Ge,[t(re,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:R},{default:c(()=>[U(g(M.$t("general.cancel")),1)]),_:1}),t(re,{loading:e(v),disabled:e(v),variant:"primary",type:"submit"},{left:c(T=>[e(v)?E("",!0):(r(),B(oe,{key:0,name:"ArrowDownOnSquareIcon",class:O(T.class)},null,8,["class"]))]),default:c(()=>[U(" "+g(M.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},ze={key:0,class:"w-16 text-sm font-medium truncate sm:w-auto"},We={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg"},Xe={class:"overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full w-[250px] max-h-[350px] scrollbar-thumb-gray-300 scrollbar-track-gray-10 pb-4"},Ye={class:"px-3 py-2 text-xs font-semibold text-gray-400 mb-0.5 block uppercase"},He={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},Je={key:1},Ke={key:0},Qe=["onClick"],Ze={class:"flex items-center"},et={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-gray-200 rounded-md w-9 h-9 text-primary-500"},tt={key:0},at=["src"],nt={class:"flex flex-col"},ot={class:"text-sm"},st={class:"font-medium"},rt={__name:"CompanySwitcher",setup($){const d=J(),n=K(),l=Z(),y=H(),_=W(),{t:v}=Q.useI18n(),h=ne(),a=I(!1),o=I(""),b=I(null);ce(l,()=>{a.value=!1,o.value=""}),_e(b,()=>{a.value=!1});function m(s){if(s)return s.split(" ")[0].charAt(0).toUpperCase()}function C(){n.openModal({title:v("company_switcher.new_company"),componentName:"CompanyModal",size:"sm"})}async function w(s){await d.setSelectedCompany(s),y.push("/admin/dashboard"),await _.setIsAppLoaded(!1),await _.bootstrap()}return(s,k)=>{const u=x("BaseIcon");return r(),f("div",{ref_key:"companySwitchBar",ref:b,class:"relative rounded"},[t(Pe),i("div",{class:"flex items-center justify-center px-3 h-8 md:h-9 ml-2 text-sm text-white bg-white rounded cursor-pointer bg-opacity-20",onClick:k[0]||(k[0]=p=>a.value=!a.value)},[e(d).selectedCompany?(r(),f("span",ze,g(e(d).selectedCompany.name),1)):E("",!0),t(u,{name:"ChevronDownIcon",class:"h-5 ml-1 text-white"})]),t(ue,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:c(()=>[a.value?(r(),f("div",We,[i("div",Xe,[i("label",Ye,g(s.$t("company_switcher.label")),1),e(d).companies.length<1?(r(),f("div",He,[t(u,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),U(" "+g(s.$t("company_switcher.no_results_found")),1)])):(r(),f("div",Je,[e(d).companies.length>0?(r(),f("div",Ke,[(r(!0),f(L,null,F(e(d).companies,(p,S)=>(r(),f("div",{key:S,class:O(["p-2 px-3 rounded-md cursor-pointer hover:bg-gray-100 hover:text-primary-500",{"bg-gray-100 text-primary-500":e(d).selectedCompany.id===p.id}]),onClick:V=>w(p)},[i("div",Ze,[i("span",et,[p.logo?(r(),f("img",{key:1,src:p.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,at)):(r(),f("span",tt,g(m(p.name)),1))]),i("div",nt,[i("span",ot,g(p.name),1)])])],10,Qe))),128))])):E("",!0)]))]),e(h).currentUser.is_owner?(r(),f("div",{key:0,class:"flex items-center justify-center p-4 pl-3 border-t-2 border-gray-100 cursor-pointer text-primary-400 hover:text-primary-500",onClick:C},[t(u,{name:"PlusIcon",class:"h-5 mr-2"}),i("span",st,g(s.$t("company_switcher.add_new_company")),1)])):E("",!0)])):E("",!0)]),_:1})],512)}}},lt={key:0,class:"scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-gray-100 overflow-y-auto bg-white rounded-md mt-2 shadow-lg p-3 absolute w-[300px] h-[200px] right-0"},it={key:0,class:"flex items-center justify-center text-gray-400 text-base flex-col mt-4"},ct={key:1},ut={key:0},dt={class:"text-sm text-gray-400 mb-0.5 block px-2 uppercase"},mt={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},pt={class:"flex flex-col"},_t={class:"text-sm"},ft={key:0,class:"text-xs text-gray-400"},ht={key:1,class:"text-xs text-gray-400"},yt={key:1,class:"mt-2"},gt={class:"text-sm text-gray-400 mb-2 block px-2 mb-0.5 uppercase"},vt={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},bt={class:"flex flex-col"},xt={class:"text-sm"},wt={class:"text-xs text-gray-400"},$t={__name:"GlobalSearchBar",setup($){const d=Fe(),n=I(!1),l=I(""),y=I(null),_=I(!1),v=Z();ce(v,()=>{n.value=!1,l.value=""}),h=Ie.debounce(h,500),_e(y,()=>{n.value=!1,l.value=""});function h(){let o={search:l.value};l.value&&(_.value=!0,d.searchUsers(o).then(()=>{n.value=!0}),_.value=!1),l.value===""&&(n.value=!1)}function a(o){if(o)return o.split(" ")[0].charAt(0).toUpperCase()}return(o,b)=>{const m=x("BaseIcon"),C=x("BaseInput"),w=x("router-link");return r(),f("div",{ref_key:"searchBar",ref:y,class:"hidden rounded md:block relative"},[i("div",null,[t(C,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=s=>l.value=s),placeholder:o.$t("global_search.search"),"container-class":"!rounded",class:"h-8 md:h-9 !rounded",onInput:h},{left:c(()=>[t(m,{name:"MagnifyingGlassIcon",class:"text-gray-400"})]),right:c(()=>[_.value?(r(),B(Ee,{key:0,class:"h-5 text-primary-500"})):E("",!0)]),_:1},8,["modelValue","placeholder"])]),t(ue,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:c(()=>[n.value?(r(),f("div",lt,[e(d).userList.length<1&&e(d).customerList.length<1?(r(),f("div",it,[t(m,{name:"ExclamationCircleIcon",class:"text-gray-400"}),U(" "+g(o.$t("global_search.no_results_found")),1)])):(r(),f("div",ct,[e(d).customerList.length>0?(r(),f("div",ut,[i("label",dt,g(o.$t("global_search.customers")),1),(r(!0),f(L,null,F(e(d).customerList,(s,k)=>(r(),f("div",{key:k,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(w,{to:{path:`/admin/customers/${s.id}/view`},class:"flex items-center"},{default:c(()=>[i("span",mt,g(a(s.name)),1),i("div",pt,[i("span",_t,g(s.name),1),s.contact_name?(r(),f("span",ft,g(s.contact_name),1)):(r(),f("span",ht,g(s.email),1))])]),_:2},1032,["to"])]))),128))])):E("",!0),e(d).userList.length>0?(r(),f("div",yt,[i("label",gt,g(o.$t("global_search.users")),1),(r(!0),f(L,null,F(e(d).userList,(s,k)=>(r(),f("div",{key:k,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(w,{to:{path:`/admin/users/${s.id}/edit`},class:"flex items-center"},{default:c(()=>[i("span",vt,g(a(s.name)),1),i("div",bt,[i("span",xt,g(s.name),1),i("span",wt,g(s.email),1)])]),_:2},1032,["to"])]))),128))])):E("",!0)]))])):E("",!0)]),_:1})],512)}}},kt={class:"fixed top-0 left-0 z-20 flex items-center justify-between w-full px-4 py-3 md:h-16 md:px-8 bg-gradient-to-r from-primary-500 to-primary-400"},Ct=["src"],St={class:"flex float-right h-8 m-0 list-none md:h-9"},Bt={key:0,class:"relative hidden float-left m-0 md:block"},It={class:"flex items-center justify-center w-8 h-8 ml-2 text-sm text-black bg-white rounded md:h-9 md:w-9"},Et={class:"ml-2"},Mt={class:"relative block float-left ml-2"},At=["src"],Ut={__name:"TheSiteHeader",setup($){const d=Me(),n=ne(),l=W(),y=H(),_=G(()=>n.currentUser&&n.currentUser.avatar!==0?n.currentUser.avatar:h()),v=G(()=>l.globalSettings.admin_portal_logo?"/storage/"+l.globalSettings.admin_portal_logo:!1);function h(){return new URL("/build/assets/default-avatar-DiPf6Xay.jpg",import.meta.url)}function a(){return n.hasAbilities([N.CREATE_INVOICE,N.CREATE_ESTIMATE,N.CREATE_CUSTOMER])}async function o(){await d.logout(),y.push("/login")}function b(){l.setSidebarVisibility(!0)}return(m,C)=>{const w=x("router-link"),s=x("BaseIcon"),k=x("BaseDropdownItem"),u=x("BaseDropdown");return r(),f("header",kt,[t(w,{to:"/admin/dashboard",class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base hidden md:block"},{default:c(()=>[v.value?(r(),f("img",{key:0,src:v.value,class:"h-6"},null,8,Ct)):(r(),B(de,{key:1,class:"h-6","light-color":"white","dark-color":"white"}))]),_:1}),i("div",{class:O([{"is-active":e(l).isSidebarOpen},"flex float-left p-1 overflow-visible text-sm ease-linear bg-white border-0 rounded cursor-pointer md:hidden md:ml-0 hover:bg-gray-100"]),onClick:ae(b,["prevent"])},[t(s,{name:"Bars3Icon",class:"!w-6 !h-6 text-gray-500"})],2),i("ul",St,[a?(r(),f("li",Bt,[t(u,{"width-class":"w-48"},{activator:c(()=>[i("div",It,[t(s,{name:"PlusIcon",class:"w-5 h-5 text-gray-600"})])]),default:c(()=>[t(w,{to:"/admin/invoices/create"},{default:c(()=>[e(n).hasAbilities(e(N).CREATE_INVOICE)?(r(),B(k,{key:0},{default:c(()=>[t(s,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+g(m.$t("invoices.new_invoice")),1)]),_:1})):E("",!0)]),_:1}),t(w,{to:"/admin/estimates/create"},{default:c(()=>[e(n).hasAbilities(e(N).CREATE_ESTIMATE)?(r(),B(k,{key:0},{default:c(()=>[t(s,{name:"DocumentIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+g(m.$t("estimates.new_estimate")),1)]),_:1})):E("",!0)]),_:1}),t(w,{to:"/admin/customers/create"},{default:c(()=>[e(n).hasAbilities(e(N).CREATE_CUSTOMER)?(r(),B(k,{key:0},{default:c(()=>[t(s,{name:"UserIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+g(m.$t("customers.new_customer")),1)]),_:1})):E("",!0)]),_:1})]),_:1})])):E("",!0),i("li",Et,[e(n).currentUser.is_owner||e(n).hasAbilities(e(N).VIEW_CUSTOMER)?(r(),B($t,{key:0})):E("",!0)]),i("li",null,[t(rt)]),i("li",Mt,[t(u,{"width-class":"w-48"},{activator:c(()=>[i("img",{src:_.value,class:"block w-8 h-8 rounded md:h-9 md:w-9 object-cover"},null,8,At)]),default:c(()=>[t(w,{to:"/admin/settings/account-settings"},{default:c(()=>[t(k,null,{default:c(()=>[t(s,{name:"CogIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+g(m.$t("navigation.settings")),1)]),_:1})]),_:1}),t(k,{onClick:o},{default:c(()=>[t(s,{name:"ArrowRightOnRectangleIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),U(" "+g(m.$t("navigation.logout")),1)]),_:1})]),_:1})])])])}}},Vt={class:"relative flex flex-col flex-1 w-full max-w-xs bg-white"},Rt={class:"absolute top-0 right-0 pt-2 -mr-12"},Lt={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},Tt={class:"flex items-center shrink-0 px-4 mb-10"},Ft={class:"hidden w-56 h-screen pb-32 overflow-y-auto bg-white border-r border-gray-200 border-solid xl:w-64 md:fixed md:flex md:flex-col md:inset-y-0 pt-16"},Nt={__name:"TheSiteSidebar",setup($){const d=Z(),n=W();function l(y){return d.path.indexOf(y)>-1}return(y,_)=>{const v=x("BaseIcon"),h=x("router-link");return r(),f(L,null,[t(e(Ve),{as:"template",show:e(n).isSidebarOpen},{default:c(()=>[t(e(Ae),{as:"div",class:"fixed inset-0 z-40 flex md:hidden",onClose:_[3]||(_[3]=a=>e(n).setSidebarVisibility(!1))},{default:c(()=>[t(e(te),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[t(e(Ue),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})]),_:1}),t(e(te),{as:"template",enter:"transition ease-in-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:c(()=>[i("div",Vt,[t(e(te),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[i("div",Rt,[i("button",{class:"flex items-center justify-center w-10 h-10 ml-1 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:_[0]||(_[0]=a=>e(n).setSidebarVisibility(!1))},[_[4]||(_[4]=i("span",{class:"sr-only"},"Close sidebar",-1)),t(v,{name:"XMarkIcon",class:"w-6 h-6 text-white","aria-hidden":"true"})])])]),_:1}),i("div",Lt,[i("div",Tt,[t(de,{class:"block h-auto max-w-full w-36 text-primary-400",alt:"InvoiceShelf Logo"})]),(r(!0),f(L,null,F(e(n).menuGroups,a=>(r(),f("nav",{key:a,class:"mt-5 space-y-1"},[(r(!0),f(L,null,F(a,o=>(r(),B(h,{key:o.name,to:o.link,class:O([l(o.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-4 py-3 border-transparent flex items-center border-l-4 border-solid text-sm not-italic font-medium"]),onClick:_[2]||(_[2]=b=>e(n).setSidebarVisibility(!1))},{default:c(()=>[t(v,{name:o.icon,class:O([l(o.link)?"text-primary-500 ":"text-gray-400","mr-4 shrink-0 h-5 w-5"]),onClick:_[1]||(_[1]=b=>e(n).setSidebarVisibility(!1))},null,8,["name","class"]),U(" "+g(y.$t(o.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])])]),_:1}),_[5]||(_[5]=i("div",{class:"shrink-0 w-14"},null,-1))]),_:1})]),_:1},8,["show"]),i("div",Ft,[(r(!0),f(L,null,F(e(n).menuGroups,a=>(r(),f("div",{key:a,class:"p-0 m-0 mt-6 list-none"},[(r(!0),f(L,null,F(a,o=>(r(),B(h,{key:o,to:o.link,class:O([l(o.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-6 hover:bg-gray-50 py-3 group flex items-center border-l-4 border-solid text-sm not-italic font-medium"])},{default:c(()=>[t(v,{name:o.icon,class:O([l(o.link)?"text-primary-500 group-hover:text-primary-500 ":"text-gray-400 group-hover:text-black","mr-4 shrink-0 h-5 w-5 "])},null,8,["name","class"]),U(" "+g(y.$t(o.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])],64)}}},Ot={class:"font-medium text-lg text-left"},jt={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},Dt={class:"text-gray-500 sm:text-sm"},qt={class:"text-gray-400 text-xs mt-2 font-light"},Gt={slot:"footer",class:"z-0 flex justify-end mt-4 pt-4 border-t border-gray-200 border-solid border-modal-bg"},Pt={__name:"ExchangeRateBulkUpdate",emits:["update"],setup($,{emit:d}){const n=me();Re();const l=J(),{t:y,tm:_}=Q.useI18n();let v=I(!1);I(!1);const h={exchange_rate:{required:q.withMessage(y("validation.required"),Y),decimal:q.withMessage(y("validation.valid_exchange_rate"),Le)}},a=ie(),o=d;async function b(){if(a.value.$touch(),a.value.$invalid)return!0;v.value=!0;let m=n.bulkCurrencies.map(w=>({id:w.id,exchange_rate:w.exchange_rate})),C=await n.updateBulkExchangeRate({currencies:m});C.data.success&&o("update",C.data.success),v.value=!1}return(m,C)=>{const w=x("BaseInput"),s=x("BaseInputGroup"),k=x("BaseButton"),u=x("BaseCard");return r(),B(u,null,{default:c(()=>[i("h6",Ot,g(m.$t("settings.exchange_rate.title")),1),i("p",jt,g(m.$t("settings.exchange_rate.description",{currency:e(l).selectedCompanyCurrency.name})),1),i("form",{action:"",onSubmit:ae(b,["prevent"])},[(r(!0),f(L,null,F(e(n).bulkCurrencies,(p,S)=>(r(),B(e(Oe),{key:S,state:p,rules:h},{default:c(({v:V})=>[t(s,{class:"my-5",label:`${p.code} to ${e(l).selectedCompanyCurrency.code}`,error:V.exchange_rate.$error&&V.exchange_rate.$errors[0].$message,required:""},{default:c(()=>[t(w,{modelValue:p.exchange_rate,"onUpdate:modelValue":R=>p.exchange_rate=R,addon:`1 ${p.code} =`,invalid:V.exchange_rate.$error,onInput:R=>V.exchange_rate.$touch()},{right:c(()=>[i("span",Dt,g(e(l).selectedCompanyCurrency.code),1)]),_:2},1032,["modelValue","onUpdate:modelValue","addon","invalid","onInput"]),i("span",qt,g(m.$t("settings.exchange_rate.exchange_help_text",{currency:p.code,baseCurrency:e(l).selectedCompanyCurrency.code})),1)]),_:2},1032,["label","error"])]),_:2},1032,["state"]))),128)),i("div",Gt,[t(k,{loading:e(v),variant:"primary",type:"submit"},{default:c(()=>[U(g(m.$t("general.save")),1)]),_:1},8,["loading"])])],32)]),_:1})}}},zt={__name:"ExchangeRateBulkUpdateModal",setup($){const d=K(),n=G(()=>d.active&&d.componentName==="ExchangeRateBulkUpdateModal");function l(){d.closeModal()}return(y,_)=>{const v=x("BaseModal");return r(),B(v,{show:n.value},{default:c(()=>[t(Pt,{onUpdate:_[0]||(_[0]=h=>l())})]),_:1},8,["show"])}}},Wt={key:0,class:"h-full"},Xt={class:"h-screen h-screen-ios overflow-y-auto md:pl-56 xl:pl-64 min-h-0"},Yt={class:"pt-16 pb-16"},ea={__name:"LayoutBasic",setup($){const d=W(),n=Z(),l=ne(),y=H(),_=K(),{t:v}=Q.useI18n(),h=me(),a=J(),o=G(()=>d.isAppLoaded);return Te(()=>{d.bootstrap().then(b=>{n.meta.ability&&!l.hasAbilities(n.meta.ability)?y.push({name:"account.settings"}):n.meta.isOwner&&!l.currentUser.is_owner&&y.push({name:"account.settings"}),b.data.current_company_settings.bulk_exchange_rate_configured==="NO"&&h.fetchBulkCurrencies().then(m=>{if(m.data.currencies.length)_.openModal({componentName:"ExchangeRateBulkUpdateModal",size:"sm"});else{let C={settings:{bulk_exchange_rate_configured:"YES"}};a.updateCompanySettings({data:C})}})})}),(b,m)=>{const C=x("router-view"),w=x("BaseGlobalLoader");return o.value?(r(),f("div",Wt,[t(Ne),t(Ut),t(Nt),t(zt),i("main",Xt,[i("div",Yt,[t(C)])])])):(r(),B(w,{key:1}))}}};export{ea as default};
